/*! Tabbed TOC for Blogger V2 <https://dte-project.github.io/blogger/tabbed-toc.html> */
!function(e,t){function r(e,t){function r(e){return decodeURIComponent(e)}function n(e){return void 0!==e}function a(e){return"string"==typeof e}function i(e){return a(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function l(e){if(a(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e)&&e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER)return+e;if(i(e))try{return JSON.parse(e)}catch(t){}}return e}function o(e,t,r){for(var n,a=t.split("["),i=0,l=a.length;l-1>i;++i)n=a[i].replace(/\]$/,""),e=e[n]||(e[n]={});e[a[i].replace(/\]$/,"")]=r}var s={},c=e.replace(/^.*?\?/,"");return""===c?s:(c.split(/&(?:amp;)?/).forEach(function(e){var a=e.split("="),i=r(a[0]),c=n(a[1])?r(a[1]):!0;c=!n(t)||t?l(c):c,"]"===i.slice(-1)?o(s,i,c):s[i]=c}),s)}e[t]=r}(window,"q2o"),function(e,t){function r(e){return encodeURIComponent(e)}function n(e){return void 0!==e}function a(e){return"string"==typeof e}function i(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function l(e){return null!==e&&"object"==typeof e}function o(e,t){t=t||{};for(var r in e)n(t[r])?l(e[r])&&l(t[r])&&(t[r]=o(e[r],t[r])):t[r]=e[r];return t}function s(e,t,r){e.addEventListener(t,r,!1)}function c(e,r,a){if(e=t.createElement(e),n(r)&&""!==r&&(e.innerHTML=r),l(a))for(var i in a)a[i]!==!1&&e.setAttribute(i,a[i]);return e}function u(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.add(r)}function d(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.remove(r)}function f(e,t,r){e.insertBefore(t,r)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t){var n,a=[];for(n in e)a.push(r(n)+"="+r(e[n]));return"?"+a.join(t||"&")}function m(e,t){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),n(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function g(e){return i(e)?("file:"===_.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":m(e)+"/feeds/posts/summary"}function y(e,t,r){var n=/\.css$/i.test(m(e)),a=c(n?"link":"script","",o(n?{href:e,rel:"stylesheet"}:{src:e},r));return a.readyState?a.onreadystatechange=function(){("loaded"===a.readyState||"complete"===a.readyState)&&(a.onreadystatechange=null,t(a))}:s(a,"load",t),f(k,a,k.firstChild),a}function v(){if(A!==!1){var e=+(E.getItem(I)||-1);if(e>A)return E.setItem(I,0),!0;E.setItem(I,++e)}return!1}function b(e,t){var r,n=e.split("T"),a=n[0].split("-"),i=n[1].split("+")[0].split(":"),l=+i[0],o=l%12||12,s={"M\\+":L.months[+a[1]-1],"D\\+":L.days[new Date(e).getDay()],"h\\+":l+"",Y:a[0],M:a[1],D:a[2],h:o+"",m:i[1],s:Math.floor(+i[2])+"","\\?":L.midday[12>o||24===o?0:1]};for(r in s)t=t.replace(RegExp("%"+r,"g"),s[r]);return t}function x(){var e=q.container,r=q.css;r&&y(a(r)?r:m($.src,"css")),y(g(D)+h(o(q.query,{callback:"_"+C,"max-results":0})),function(){e?(e=t.querySelector(e),e&&(e.innerHTML=""),f(e,j)):f($.parentNode,j,$),d(j.parentNode,I+"-loading");var r=q.active;i(r)&&(r=w[r]),N[r]&&N[r].click()})}var $=t.currentScript||t.getElementsByTagName("script").pop(),N={},w=[],M={},S=9999,_=e.location,E=e.localStorage,T={direction:"ltr",hash:Date.now(),url:_.protocol+"//"+_.host,name:"tabbed-toc",css:1,sort:1,ad:!0,active:0,container:0,date:"%M+ %D, %Y %h:%m %?",excerpt:0,image:0,target:0,load:0,recent:7,hide:[],text:{title:"Table of Content",loading:"Loading&hellip;",midday:["AM","PM"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],recent:" <sup>New!</sup>"},query:{alt:"json-in-script",orderby:"published","max-results":S,"start-index":1}},k=t.head,q=o(T,q2o($.src)),C=q.hash,D=q.id||m(q.url),I=q.name,A=q.ad,L=q.text,j=c("div",'<h3 class="'+I+'-title">'+L.title+"</h3>",{"class":I+" "+q.direction,id:I+":"+C}),R=c("p",L.loading,{"class":I+"-loading"});A===!0&&(A=3);var F=q2o(_.search);n(F[C])&&(delete F[C].url,q=o(q,F[C])),e["_"+C]=function(n){function l(e){var t=this.id.split(":")[1],n=this.title,a=j.parentNode,i=N[n],l=M[n];for(v in N)v!==n&&d(N[v],"active");for(v in M)v!==n&&(d(M[v],"active"),M[v].style.display="none",M[v].previousSibling.style.display="none");l.$||(u(i,"loading"),u(l,"loading"),f(j.children[2],R),u(a,I+"-loading"),y(g(D)+"/-/"+r(n)+h(o(q.query,{callback:"_"+(C+1)})),function(){d(a,I+"-loading"),d(i,"loading"),d(l,"loading"),p(R)},{"class":I+"-js",id:I+"-js:"+t})),u(i,"active"),u(l,"active"),l.style.display="",l.previousSibling.style.display="",e.preventDefault()}n=n.feed||{};var v,b=q.sort,x=n.entry||[],$=n.category||[],S=(x.length,$.length);i(b)?(b=+b,$=$.sort(function(e,t){return e.term.localeCompare(t.term)}),-1===b&&($=$.reverse())):a(b)&&(b=e[b],$=$.sort(b));var _,E=c("nav","",{"class":I+"-tabs p"});f(j,E),f(j,c("section","",{"class":I+"-panels p"}));var T=Object.values(q.hide);for(v=0;S>v;++v){var k=$[v].term;T.indexOf(k)>-1||(_=c("a",k,{"class":I+"-tab "+I+"-tab:"+v,href:m(q.url)+"/search/label/"+r(k),id:I+"-tab:"+C+"."+v,title:k}),w.push(k),N[k]=_,s(_,"click",l),f(E,_),S-1>v&&f(E,t.createTextNode(" ")),f(j.children[2],c("h4",k,{"class":I+"-title"})),f(j.children[2],M[k]=c("ol","",{"class":I+"-panel "+I+"-panel:"+v,id:I+"-panel:"+C+"."+v})))}},e["_"+(C+1)]=function(t){function n(e){if(e){var t=e.published.$t,r=(e.link.find(function(e){return"alternate"===e.rel})||{}).href,n="";if(E){var a,l,o,s="media$thumbnail"in e;E===!0&&(E=80),i(E)?(a=l=E+"px",E="s"+E+"-c"):(o=/^s(\d+)(\-[cp])?$/.exec(E))?(a=o[1]+"px",l=o[2]?o[1]+"px":"auto"):(o=/^w(\d+)\-h(\d+)(\-[cp])?$/.exec(E))&&(a=o[1]+"px",l=o[2]+"px"),n+='<p class="'+I+"-image "+(s?"loading":"no-image")+'">',n+=s?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(\-c)?\//g,"/"+E+"/")+'" style="display:block;width:'+a+";height:"+l+';">':'<span class="img" style="display:block;width:'+a+";height:"+l+';">',n+="</p>"}if(n+='<h5 class="'+I+'-title"><a href="'+r+'"'+(_?' target="'+_+'"':"")+">"+e.title.$t+"</a></h5>",q.date&&(n+='<p class="'+I+'-time"><time datetime="'+t+'">'+b(t,q.date)+"</time></p>"),T){var u=e.summary.$t.trim().replace(/<.*?>/g,"").replace(/[<>]/g,""),d=u.length;T===!0&&(T=200),n+='<p class="'+I+"-excerpt"+(d?"":" no-excerpt")+'">'+u.slice(0,T)+(d>T?"&hellip;":"")+"</p>"}return c("li",n,{"class":e.$?"recent":!1})}}t=t.feed||{};var l,p,m=q.sort,x=((t.link.find(function(e){return"alternate"===e.rel})||{}).href||"").split("/").pop(),$=t.entry||[],N=$.length,w=M[x];for(l=0;N>l;++l){var S=l>q.recent?"":L.recent;$[l].$=!!S,$[l].title.$t+=S}i(m)?(m=+m,$=$.sort(function(e,t){return e.title.$t.localeCompare(t.title.$t)}),-1===m&&($=$.reverse())):a(m)&&(m=e[m],$=$.sort(m));var _=q.target,E=q.image,T=q.excerpt,k="has-title has-url";for(q.date&&(k+=" has-time"),E&&(k+=" has-image"),T&&(k+=" has-excerpt"),u(j,k),l=0;N>l;++l)f(w,n($[l]));if(E){var D=w.getElementsByTagName("img"),A=function(){u(this.parentNode,"error")},R=function(){d(this.parentNode,"loading")};for(l=0,p=D.length;p>l;++l)s(D[l],"error",A),s(D[l],"load",R)}v()?(e["_"+C+"_"]=function(e){e=e.feed||{};var t=e.entry||[];t=t[Math.floor(Math.random()*t.length)],(t=n(t))&&(u(t,"ad"),f(w,t,w.firstChild))},y(g("298900102869691923")+h(o(q.query,{callback:"_"+C+"_","max-results":21,orderby:"updated"}))+"&q="+r(x.toLowerCase()))):delete e["_"+C+"_"],M[x].$=!0},i(q.load)?e.setTimeout(x,+q.load):q.load===!0?s(e,"load",x):x()}(window,document);