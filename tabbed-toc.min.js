/*! Tabbed TOC for Blogger V2 <https://dte-project.github.io/blogger/tabbed-toc.html> */
!function(e,t){function r(e){return encodeURIComponent(e)}function n(e){return decodeURIComponent(e)}function a(e){return void 0!==e}function i(e){return"string"==typeof e}function l(e){return"number"==typeof e}function s(e){return"object"==typeof e}function o(e){return i(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function c(e){if(i(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^((\d+)?\.)?\d+$/.test(e))return+e;if(o(e))try{return JSON.parse(e)}catch(t){}}return e}function u(e,t,r){for(var n,a=t.split("["),i=0,l=a.length;l-1>i;++i)n=a[i].replace(/\]$/,""),e=e[n]||(e[n]={});e[a[i].replace(/\]$/,"")]=r}function d(e,t){var r={},i=e.replace(/^.*?\?/,"");return""===i?r:(i.split(/&(?:amp;)?/).forEach(function(e){var i=e.split("="),l=n(i[0]),s=a(i[1])?n(i[1]):!0;s=!a(t)||t?c(s):s,"]"===l.slice(-1)?u(r,l,s):r[l]=s}),r)}function p(e,t){t=t||{};for(var r in t)null===t[r]&&a(e[r])?delete e[r]:s(t[r])&&s(e[r])?p(e[r],t[r]):e[r]=t[r];return e}function f(e,t){return e=e.split(/[?&#]/)[0].replace(/\/+$/,""),a(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function h(e,t,r){e.addEventListener(t,r,!1)}function m(e,r,n){if(e=t.createElement(e),a(r)&&""!==r&&(e.innerHTML=r),s(n))for(var i in n)n[i]!==!1&&e.setAttribute(i,n[i]);return e}function y(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.add(r)}function g(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.remove(r)}function v(e,t,r){e.insertBefore(t,r)}function b(e){e.parentNode.removeChild(e)}function $(e,t){var n,a=[];for(n in e)a.push(r(n)+"="+r(e[n]));return"?"+a.join(t||"&")}function x(e,t,r){var n=/\.css$/i.test(e.split(/[?&#]/)[0]),a=m(n?"link":"script","",p(n?{href:e,rel:"stylesheet"}:{src:e},r));return a.readyState?a.onreadystatechange=function(){("loaded"===a.readyState||"complete"===a.readyState)&&(a.onreadystatechange=null,t(a))}:h(a,"load",t),v(j,a,j.firstChild),a}function M(){if(R!==!1){var e=+(L.getItem(O)||-1);if(e>R)return L.setItem(O,0),!0;L.setItem(O,++e)}return!1}function k(e,t){var r,n=e.split("T"),a=n[0].split("-"),i=n[1].split("+")[0].split(":"),l={"M+":B.months[+a[1]-1],"D+":B.days[new Date(e).getDay()],Y:a[0],M:a[1],D:a[2],h:i[0],m:i[1],s:Math.floor(+i[2])+""};for(r in l)t=t.replace(RegExp("%"+r.replace("+","\\+"),"g"),l[r]);return t}function w(){H.css&&x(f(I.src,"css")),x(A+"/feeds/posts/summary"+$(p(H.query,{callback:"_"+J,"max-results":0})),function(){var e=H.container;e?(e=t.querySelector(e),e&&(e.innerHTML=""),v(e,F)):v(I.parentNode,F,I),g(F.parentNode,O+"-loading");var r=H.active;l(r)&&(r=N[r]),T[r]&&T[r].click()})}var S,T={},N=[],_={},C=9999,D=e.location,L=e.localStorage,q={direction:"ltr",hash:Date.now(),url:D.protocol+"//"+D.host,name:"tabbed-toc",css:1,sort:1,ad:!0,active:0,container:0,date:"%D+, %D %M+ %Y %h:%m",excerpt:0,image:0,target:0,load:0,recent:7,hide:[],text:{title:"Table of Content",loading:"Loading&hellip;",months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],recent:" <sup>New!</sup>"},query:{alt:"json-in-script",orderby:"published"}},j=t.head,E=t.body,I=(E.parentNode,t.currentScript||t.getElementsByTagName("script").pop()),H=p(q,d(I.src)),J=H.hash,A=f(H.url),O=H.name,R=H.ad,B=H.text,F=m("div",'<h3 class="'+O+'-title">'+B.title+"</h3>",{"class":O+" "+H.direction,id:O+":"+J}),U=m("p",B.loading,{"class":O+"-loading"});R===!0&&(R=3);var Y=d(D.search);a(Y[J])&&(delete Y[J].url,H=p(H,Y[J])),e["_"+J]=function(n){function a(e){S=this;var t=S.id.split(":")[1],n=S.innerHTML,a=F.parentNode,i=T[n];for(s in T)g(T[s],"active");for(s in _)_[s].style.display="none",_[s].previousSibling.style.display="none",g(_[s],"active");_[n].$||(y(i,"active loading"),v(F.children[2],U),y(a,O+"-loading"),x(A+"/feeds/posts/summary/-/"+r(n)+$(p(H.query,{callback:"_"+(J+1),"max-results":C})),function(){g(a,O+"-loading"),g(i,"loading"),b(U)},{"class":O+"-js",id:O+"-js:"+t})),y(i,"active"),_[n].style.display="",_[n].previousSibling.style.display="",y(_[n],"active"),e.preventDefault()}n=n.feed||{};var s,o=n.entry||[],c=n.category||[],u=(o.length,c.length),d=H.sort;l(d)||/^-?1$/.test(d)?(d=+d,c=c.sort(function(e,t){return e.term.localeCompare(t.term)}),-1===d&&(c=c.reverse())):i(d)&&(d=e[d],c=c.sort(d));var f,M=m("nav","",{"class":O+"-tabs p"});for(v(F,M),v(F,m("section","",{"class":O+"-panels p"})),s=0;u>s;++s){var k=c[s].term;H.hide.indexOf(k)>-1||(f=m("a",k,{"class":O+"-tab "+O+"-tab:"+s,href:"#"+O+"-panel:"+J+"."+s,id:O+"-tab:"+J+"."+s,title:k}),N.push(k),T[k]=f,h(f,"click",a),v(M,f),u-1>s&&v(M,t.createTextNode(" ")),v(F.children[2],m("h4",k,{"class":O+"-title"})),v(F.children[2],_[k]=m("ol","",{"class":O+"-panel "+O+"-panel:"+s+" active",id:O+"-panel:"+J+"."+s})))}},e["_"+(J+1)]=function(t){function n(e){if(e){var t,r=e.published.$t,n="";for(s=0,o=e.link.length;o>s;++s)if("alternate"===e.link[s].rel){t=e.link[s].href;break}if(n+='<h5 class="'+O+'-title"><a href="'+t+'"'+(b?' target="'+b+'"':"")+">"+e.title.$t+"</a></h5>",H.date&&(n+='<p class="'+O+'-time"><time datetime="'+r+'">'+k(r,H.date)+"</time></p>"),w){var a="media$thumbnail"in e;w===!0&&(w=80),n+='<p class="'+O+"-image"+(a?"":" no-image")+'">',n+=a?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(-c)?\//g,"/s"+w+"-c/")+'" style="display:block;width:'+w+"px;height:"+w+'px;">':'<span class="img" style="display:block;width:'+w+"px;height:"+w+'px;">',n+="</p>"}if(T){var i=e.summary.$t.trim().replace(/<.*?>/g,"").replace(/[<>]/g,""),l=i.length;T===!0&&(T=200),n+='<p class="'+O+"-excerpt"+(l?"":" no-excerpt")+'">'+i.slice(0,T)+(l>T?"&hellip;":"")+"</p>"}return m("li",n,{"class":e.$?"recent":!1})}}t=t.feed||{};var a,s,o,c=(S?S.id.split(":")[1].split(".")[1]:"",S?S.innerHTML:""),u=t.entry||[],d=u.length,f=_[c];for(a=0;d>a;++a){var h=a>H.recent?"":B.recent;u[a].$=!!h,u[a].title.$t+=h}var g=H.sort;l(g)||/^-?1$/.test(g)?(g=+g,u=u.sort(function(e,t){return e.title.$t.localeCompare(t.title.$t)}),-1===g&&(u=u.reverse())):i(g)&&(g=e[g],u=u.sort(g));var b=H.target,w=H.image,T=H.excerpt,N="has-title has-url";for(H.date&&(N+=" has-time"),w&&(N+=" has-image"),T&&(N+=" has-excerpt"),y(F,N),a=0;d>a;++a)v(f,n(u[a]));M()?(e["_"+J+"_"]=function(e){e=e.feed||{};var t=e.entry||[];t=t[Math.floor(Math.random()*t.length)],(t=n(t))&&(y(t,"ad"),v(f,t,f.firstChild))},x("//www.blogger.com/feeds/298900102869691923/posts/summary"+$(p(H.query,{callback:"_"+J+"_","max-results":C}))+"&q="+r(c.toLowerCase()))):delete e["_"+J+"_"],_[c].$=!0},l(H.load)?e.setTimeout(w,H.load):H.load===!0?h(e,"load",w):w()}(window,document);