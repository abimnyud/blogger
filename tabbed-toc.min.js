/*! Tabbed TOC for Blogger V2 <https://dte-project.github.io/blogger/tabbed-toc.html> */
!function(e,t){function r(e){return encodeURIComponent(e)}function n(e){return decodeURIComponent(e)}function a(e){return void 0!==e}function i(e){return"string"==typeof e}function l(e){return"number"==typeof e}function s(e){return"object"==typeof e}function o(e){return i(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function c(e){if(i(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^((\d+)?\.)?\d+$/.test(e))return+e;if(o(e))try{return JSON.parse(e)}catch(t){}}return e}function u(e,t,r){for(var n,a=t.split("["),i=0,l=a.length;l-1>i;++i)n=a[i].replace(/\]$/,""),e=e[n]||(e[n]={});e[a[i].replace(/\]$/,"")]=r}function d(e,t){var r={},i=e.replace(/^.*?\?/,"");return""===i?r:(i.split(/&(?:amp;)?/).forEach(function(e){var i=e.split("="),l=n(i[0]),s=a(i[1])?n(i[1]):!0;s=!a(t)||t?c(s):s,"]"===l.slice(-1)?u(r,l,s):r[l]=s}),r)}function p(e,t){t=t||{};for(var r in t)null===t[r]&&a(e[r])?delete e[r]:s(t[r])&&s(e[r])?p(e[r],t[r]):e[r]=t[r];return e}function f(e,t,r){e.addEventListener(t,r,!1)}function h(e,r,n){if(e=t.createElement(e),a(r)&&""!==r&&(e.innerHTML=r),s(n))for(var i in n)n[i]!==!1&&e.setAttribute(i,n[i]);return e}function m(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.add(r)}function y(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.remove(r)}function v(e,t,r){e.insertBefore(t,r)}function g(e,t){var n,a=[];for(n in e)a.push(r(n)+"="+r(e[n]));return"?"+a.join(t||"&")}function b(e,t,r){var n=/\.css([?&#].*)?$/i.test(e),a=h(n?"link":"script","",p(n?{href:e,rel:"stylesheet"}:{src:e},r));return a.readyState?a.onreadystatechange=function(){("loaded"===a.readyState||"complete"===a.readyState)&&(a.onreadystatechange=null,t(a))}:f(a,"load",t),v(E,a,E.firstChild),a}function x(){if(A!==!1){var e=+(N.getItem(J)||-1);if(console.log(e),e>A)return N.setItem(J,0),!0;N.setItem(J,++e)}return!1}function $(e,t){var r,n=e.split("T"),a=n[0].split("-"),i=n[1].split("+")[0].split(":"),l={"M+":H.months[+a[1]-1],"D+":H.days[new Date(e).getDay()],Y:a[0],M:a[1],D:a[2],h:i[0],m:i[1],s:Math.floor(+i[2])+""};for(r in l)t=t.replace(RegExp("%"+r.replace("+","\\+"),"g"),l[r]);return t}function k(){b(j.src.split(/[?&#]/)[0].replace(/\.js$/,".css")),b(I+"/feeds/posts/summary"+g(p(q.query,{"max-results":0}))+"&callback=_"+w,function(){var e=q.container;e?(e=t.querySelector(e),e&&v(e,O)):v(j.parentNode,O,j),y(O.parentNode,J+"-loading");var r=q.active;l(r)&&(r=T[r]),S[r]&&S[r].click()})}var M,S={},T=[],_={},w=Date.now(),D=9999,N=e.localStorage,C={source:"http://dte-history.blogspot.com",url:location.protocol+"//"+location.host,name:"tabbed-toc",sort:1,ad:!0,active:0,container:0,date:"%D+, %D %M+ %Y %h:%m",excerpt:0,image:0,target:0,load:0,recent:7,hide:[],text:{title:"Table of Content",loading:"Loading&hellip;",months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],recent:" <sup>New!</sup>"},query:{alt:"json-in-script",orderby:"published"}},E=t.head,L=t.body,j=(L.parentNode,t.currentScript||t.getElementsByTagName("script").pop()),q=p(C,d(j.src)),I=q.url.split(/[?&#]/)[0].replace(/\/+/,""),J=q.name,A=q.ad,H=q.text,O=h("div",'<h3 class="'+J+'-title">'+H.title+"</h3>",{"class":J,id:J+":"+w});A===!0&&(A=3),e["_"+w]=function(n){function a(e){M=this;var t=M.id.split(":")[1],n=M.innerHTML,a=O.parentNode,i=S[n];for(s in S)y(S[s],"active");for(s in _)_[s].style.display="none",_[s].previousElementSibling.style.display="none",y(_[s],"active");if(_[n])m(i,"active"),_[n].style.display="",_[n].previousElementSibling.style.display="",m(_[n],"active");else{m(i,"active loading");var l=h("p",H.loading,{"class":J+"-loading"});v(O.children[2],l),m(a,J+"-loading"),b(I+"/feeds/posts/summary/-/"+r(n)+g(p(q.query,{"max-results":D}))+"&callback=_"+(w+1),function(){O.children[2].removeChild(l),y(a,J+"-loading"),y(i,"loading")},{"class":J+"-js",id:J+"-js:"+t})}e.preventDefault()}n=n.feed||{};var s,o=n.entry||[],c=n.category||[],u=(o.length,c.length),d=q.sort;l(d)||/^\-1|1$/.test(d)?(d=+d,c=c.sort(function(e,t){return e.term.localeCompare(t.term)}),-1===d&&(c=c.reverse())):i(d)&&(d=e[d],c=c.sort(d));var x,$=h("nav","",{"class":J+"-tabs p"});for(s=0;u>s;++s){var k=c[s].term;q.hide.indexOf(k)>-1||(T.push(k),x=h("a",k,{"class":J+"-tab "+J+"-tab:"+s,href:"#"+J+"-panel:"+w+"-"+s,id:J+"-tab:"+w+"-"+s,title:k}),f(x,"click",a),v($,x),u-1>s&&v($,t.createTextNode(" ")),S[k]=x)}v(O,$),v(O,h("section","",{"class":J+"-panels p"}))},e["_"+(w+1)]=function(t){function n(e){if(e){var t,r=e.published.$t;for(s=0,o=e.link.length;o>s;++s)if("alternate"===e.link[s].rel){t=e.link[s].href;break}var n="";if(n+='<h5 class="'+J+'-title"><a href="'+t+'"'+(T?' target="'+T+'"':"")+">"+e.title.$t+"</a></h5>",q.date&&(n+='<p class="'+J+'-time"><time datetime="'+r+'">'+$(r,q.date)+"</time></p>"),D){var a="media$thumbnail"in e;D===!0&&(D=80),n+='<p class="'+J+"-image"+(a?"":" no-image")+'">',n+=a?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(-c)?\//g,"/s"+D+"-c/")+'" style="display:block;width:'+D+"px;height:"+D+'px;">':'<span class="img" style="display:block;width:'+D+"px;height:"+D+'px;">',n+="</p>"}if(N){var i=e.summary.$t.trim().replace(/<.*?>/g,"").replace(/[<>]/g,""),l=i.length;N===!0&&(N=200),n+='<p class="'+J+"-excerpt"+(l?"":" no-excerpt")+'">'+i.slice(0,N)+(l>N?"&hellip;":"")+"</p>"}return h("li",n,{"class":e.marked?"recent":!1})}}t=t.feed||{};var a,s,o,c=M?M.id.split(":")[1].split("-")[1]:"",u=M?M.innerHTML:"",d=t.entry||[],f=d.length,y=h("ol","",{"class":J+"-panel "+J+"-panel:"+c+" active",id:J+"-panel:"+w+"-"+c});for(a=0;f>a;++a){var k=a>q.recent?"":H.recent;d[a].marked=!!k,d[a].title.$t+=k}var S=q.sort;l(S)||/^\-1|1$/.test(S)?(S=+S,d=d.sort(function(e,t){return e.title.$t.localeCompare(t.title.$t)}),-1===S&&(d=d.reverse())):i(S)&&(S=e[S],d=d.sort(S));var T=q.target,D=q.image,N=q.excerpt,E="has-title has-url";for(q.date&&(E+=" has-time"),D&&(E+=" has-image"),N&&(E+=" has-excerpt"),m(O,E),a=0;f>a;++a)v(y,n(d[a]));x()&&(e["_"+w+"_"]||(e["_"+w+"_"]=function(e){e=e.feed||{};var t=e.entry||[],r=t.length;t=t[Math.floor(Math.random()*r)],(t=n(t))&&(m(t,"ad"),v(y,t,y.firstChild))}),b(C.source+"/feeds/posts/summary"+g(p(q.query,{"max-results":null}))+"&q="+r(u)+"&callback=_"+w+"_")),v(O.children[2],h("h4",u,{"class":J+"-title"})),v(O.children[2],y),_[u]=y},l(q.load)?e.setTimeout(k,q.load):q.load===!0?f(e,"load",k):k()}(window,document);