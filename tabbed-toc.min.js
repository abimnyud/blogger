/*! Tabbed TOC for Blogger V2 <https://dte-project.github.io/blogger/tabbed-toc.html> */
!function(e,r){function t(e){return encodeURIComponent(e)}function a(e){return decodeURIComponent(e)}function n(e){return void 0!==e}function l(e){return"string"==typeof e}function s(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function c(e){return"object"==typeof e&&null!==e}function i(e){return l(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function p(e){if(l(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e)&&e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER)return+e;if(i(e))try{return JSON.parse(e)}catch(r){}}return e}function o(e,r,t){for(var a,n=r.split("["),l=0,s=n.length;s-1>l;++l)a=n[l].replace(/\]$/,""),e=e[a]||(e[a]={});e[n[l].replace(/\]$/,"")]=t}function g(e,r){var t={},l=e.replace(/^.*?\?/,"");return""===l?t:(l.split(/&(?:amp;)?/).forEach(function(e){var l=e.split("="),s=a(l[0]),c=n(l[1])?a(l[1]):!0;c=!n(r)||r?p(c):c,"]"===s.slice(-1)?o(t,s,c):t[s]=c}),t)}function u(e,r){r=r||{};for(var t in e)n(r[t])?c(e[t])&&c(r[t])&&(r[t]=u(e[t],r[t])):r[t]=e[t];return r}function d(e,r,t){e.addEventListener(r,t,!1)}function f(e,t,a){if(e=r.createElement(e),n(t)&&""!==t&&(e.innerHTML=t),c(a))for(var l in a)a[l]!==!1&&e.setAttribute(l,a[l]);return e}function $(e,r){r=r.split(/\s+/);for(var t;t=r.shift();)e.classList.add(t)}function m(e,r){r=r.split(/\s+/);for(var t;t=r.shift();)e.classList.remove(t)}function v(e,r,t){e.insertBefore(r,t)}function b(e){e.parentNode.removeChild(e)}function h(e,r){var a,n=[];for(a in e)n.push(t(a)+"="+t(e[a]));return"?"+n.join(r||"&")}function y(e,r){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),n(r)&&(e=e.replace(/\.[\w-]+$/,r?"."+r:"")),e}function x(e){return s(e)?("file:"===N.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":y(e)+"/feeds/posts/summary"}function E(e,r,t){var a=/\.css$/i.test(y(e)),n=f(a?"link":"script","",u(a?{href:e,rel:"stylesheet"}:{src:e},t));return n.readyState?n.onreadystatechange=function(){("loaded"===n.readyState||"complete"===n.readyState)&&(n.onreadystatechange=null,r(n))}:d(n,"load",r),v(I,n,I.firstChild),n}function R(){if(B!==!1){var e=+(D.getItem(H)||-1);if(e>B)return D.setItem(H,0),!0;D.setItem(H,++e)}return!1}function S(e,r){var t,a=e.split("T"),n=a[0].split("-"),l=a[1].split("+")[0].split(":"),s={"M+":G.months[+n[1]-1],"D+":G.days[new Date(e).getDay()],Y:n[0],M:n[1],D:n[2],h:l[0],m:l[1],s:Math.floor(+l[2])+""};for(t in s)r=r.replace(RegExp("%"+t.replace("+","\\+"),"g"),s[t]);return r}function k(){var e=O.container,t=O.css;t&&E(l(t)?t:y(q.src,"css")),E(x(z)+h(u(O.query,{callback:"_"+C,"max-results":0})),function(){e?(e=r.querySelector(e),e&&(e.innerHTML=""),v(e,F)):v(q.parentNode,F,q),m(F.parentNode,H+"-loading");var t=O.active;s(t)&&(t=j[t]),_[t]&&_[t].click()})}var w,q=r.currentScript||r.getElementsByTagName("script").pop(),_={},j=[],T={},M=9999,N=e.location,D=e.localStorage,L={direction:"ltr",hash:Date.now(),url:N.protocol+"//"+N.host,name:"tabbed-toc",css:1,sort:1,ad:!0,active:0,container:0,date:"%D+, %D %M+ %Y %h:%m",excerpt:0,image:0,target:0,load:0,recent:7,hide:[],text:{title:"Table of Content",loading:"Loading&hellip;",months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],recent:" <sup>New!</sup>"},query:{alt:"json-in-script",orderby:"published","max-results":M,"start-index":1}},I=r.head,O=u(L,g(q.src)),C=O.hash,z=O.id||y(O.url),H=O.name,B=O.ad,G=O.text,F=f("div",'<h3 class="'+H+'-title">'+G.title+"</h3>",{"class":H+" "+O.direction,id:H+":"+C}),J=f("p",G.loading,{"class":H+"-loading"});B===!0&&(B=3);var A=g(N.search);n(A[C])&&(delete A[C].url,O=u(O,A[C])),e["_"+C]=function(a){function n(e){w=this;var r=w.id.split(":")[1],a=w.innerHTML,n=F.parentNode,l=_[a];for(c in _)m(_[c],"active");for(c in T)T[c].style.display="none",T[c].previousSibling.style.display="none",m(T[c],"active");T[a].$||($(l,"active loading"),v(F.children[2],J),$(n,H+"-loading"),E(x(z)+"/-/"+t(a)+h(u(O.query,{callback:"_"+(C+1)})),function(){m(n,H+"-loading"),m(l,"loading"),b(J)},{"class":H+"-js",id:H+"-js:"+r})),$(l,"active"),T[a].style.display="",T[a].previousSibling.style.display="",$(T[a],"active"),e.preventDefault()}a=a.feed||{};var c,i=O.sort,p=a.entry||[],o=a.category||[],g=(p.length,o.length);s(i)?(i=+i,o=o.sort(function(e,r){return e.term.localeCompare(r.term)}),-1===i&&(o=o.reverse())):l(i)&&(i=e[i],o=o.sort(i));var y,R=f("nav","",{"class":H+"-tabs p"});for(v(F,R),v(F,f("section","",{"class":H+"-panels p"})),c=0;g>c;++c){var S=o[c].term;O.hide.indexOf(S)>-1||(y=f("a",S,{"class":H+"-tab "+H+"-tab:"+c,href:"#"+H+"-panel:"+C+"."+c,id:H+"-tab:"+C+"."+c,title:S}),j.push(S),_[S]=y,d(y,"click",n),v(R,y),g-1>c&&v(R,r.createTextNode(" ")),v(F.children[2],f("h4",S,{"class":H+"-title"})),v(F.children[2],T[S]=f("ol","",{"class":H+"-panel "+H+"-panel:"+c+" active",id:H+"-panel:"+C+"."+c})))}},e["_"+(C+1)]=function(r){function a(e){if(e){var r,t=e.published.$t,a="";for(c=0,i=e.link.length;i>c;++c)if("alternate"===e.link[c].rel){r=e.link[c].href;break}if(k){var n="media$thumbnail"in e;k===!0&&(k=80),s(k)&&(k="s"+k+"-c"),a+='<p class="'+H+"-image"+(n?"":" no-image")+'">',a+=n?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(-c)?\//g,"/"+k+"/")+'" style="display:block;width:'+k+"px;height:"+k+'px;">':'<span class="img" style="display:block;width:'+k+"px;height:"+k+'px;">',a+="</p>"}if(a+='<h5 class="'+H+'-title"><a href="'+r+'"'+(y?' target="'+y+'"':"")+">"+e.title.$t+"</a></h5>",O.date&&(a+='<p class="'+H+'-time"><time datetime="'+t+'">'+S(t,O.date)+"</time></p>"),q){var l=e.summary.$t.trim().replace(/<.*?>/g,"").replace(/[<>]/g,""),p=l.length;q===!0&&(q=200),a+='<p class="'+H+"-excerpt"+(p?"":" no-excerpt")+'">'+l.slice(0,q)+(p>q?"&hellip;":"")+"</p>"}return f("li",a,{"class":e.$?"recent":!1})}}r=r.feed||{};var n,c,i,p=O.sort,o=w?w.innerHTML:"",g=r.entry||[],d=g.length,m=T[o];for(n=0;d>n;++n){var b=n>O.recent?"":G.recent;g[n].$=!!b,g[n].title.$t+=b}s(p)?(p=+p,g=g.sort(function(e,r){return e.title.$t.localeCompare(r.title.$t)}),-1===p&&(g=g.reverse())):l(p)&&(p=e[p],g=g.sort(p));var y=O.target,k=O.image,q=O.excerpt,_="has-title has-url";for(O.date&&(_+=" has-time"),k&&(_+=" has-image"),q&&(_+=" has-excerpt"),$(F,_),n=0;d>n;++n)v(m,a(g[n]));R()?(e["_"+C+"_"]=function(e){e=e.feed||{};var r=e.entry||[];r=r[Math.floor(Math.random()*r.length)],(r=a(r))&&($(r,"ad"),v(m,r,m.firstChild))},E(x("298900102869691923")+h(u(O.query,{callback:"_"+C+"_","max-results":21,orderby:"updated"}))+"&q="+t(o.toLowerCase()))):delete e["_"+C+"_"],T[o].$=!0},s(O.load)?e.setTimeout(k,+O.load):O.load===!0?d(e,"load",k):k()}(window,document);