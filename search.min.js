/*! AJAX Search Widget for Blogger V2 <https://dte-project.github.io/blogger/search.html> */
!function(e,t){function n(e,t){function n(e){return decodeURIComponent(e)}function r(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return i(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function s(e){if(i(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e))return+e;if(a(e))try{return JSON.parse(e)}catch(t){}}return e}function l(e,t,n){for(var r,i=t.split("["),a=0,s=i.length;s-1>a;++a)r=i[a].replace(/\]$/,""),e=e[r]||(e[r]={});e[i[a].replace(/\]$/,"")]=n}var o={},c=e.replace(/^.*?\?/,"");return""===c?o:(c.split(/&(?:amp;)?/).forEach(function(e){var i=e.split("="),a=n(i[0]),c=r(i[1])?n(i[1]):!0;c=!r(t)||t?s(c):c,"]"===a.slice(-1)?l(o,a,c):o[a]=c}),o)}e[t]=n}(window,"q2o"),function(e,t){function n(e){return encodeURIComponent(e)}function r(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function s(e){return null!==e&&"object"==typeof e}function l(e,t){t=t||{};for(var n in e)r(t[n])?s(e[n])&&s(t[n])&&(t[n]=l(e[n],t[n])):t[n]=e[n];return t}function o(e,t,n){e.addEventListener(t,n,!1)}function c(e,n,i){if(e=t.createElement(e),r(n)&&""!==n&&(e.innerHTML=n),s(i))for(var a in i)i[a]!==!1&&e.setAttribute(a,i[a]);return e}function u(e,t){t=t.split(/\s+/);for(var n;n=t.shift();)e.classList.add(n)}function d(e,t){t=t.split(/\s+/);for(var n;n=t.shift();)e.classList.remove(n)}function f(e,t,n){t&&e.insertBefore(t,n)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t){var r,i=[];for(r in e)i.push(n(r)+"="+n(e[r]));return"?"+i.join(t||"&")}function m(e,t){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),r(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function g(e){return a(e)?("file:"===E.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":m(e)+"/feeds/posts/summary"}function v(e,t,n){var r=/\.css$/i.test(m(e)),i=c(r?"link":"script","",l(r?{href:e,rel:"stylesheet"}:{src:e},n));return i.readyState?i.onreadystatechange=function(){("loaded"===i.readyState||"complete"===i.readyState)&&(i.onreadystatechange=null,t&&t(i))}:t&&o(i,"load",t),f(R,i,R.firstChild),i}function y(e,t,n){n=n||[],n.unshift(t),"function"==typeof P&&P.apply(e,n)}function b(){if(W!==!1){var e=+(q.getItem(F)||-1);if(e>W)return q.setItem(F,0),!0;q.setItem(F,++e)}return!1}function x(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $(e){if(!H)return e;var t=RegExp(H.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\\\$&"),"i");return e.replace(t,"<mark>$&</mark>")}function w(n){return e.getComputedStyle(t.body).getPropertyValue(n)}function k(t){if(!O.container&&Q.parentNode){var n=J.getBoundingClientRect(),r=n.top,i=n.left,a=n.width,s=n.height;u(Q,F+"-float"),Q.style.cssText="background-color:"+w("background-color")+";color:"+w("color")+";position:fixed;z-index:9999;top:"+(r+s)+"px;left:"+i+"px;width:"+a+"px;max-height:"+(e.innerHeight-r-s)+"px;overflow:auto;",y(Q,t&&t.type||"fit",[n])}}function N(e,t){var n=B[e][t],r=Q.children[0],i=1===I?"empty":"end";f(r,Z),n[0]?(nt.style.display=I>1?"":"none",rt.style.display=G>n[0]?"none":"",et.innerHTML=n[1],f(r,et)):(r.innerHTML='<p class="'+F+"-results-"+i+'">'+V[i].replace("%s%",x(H))+"</p>",rt.style.display="none"),f(r,tt),f(K,Q),k(),p(X)}function M(e,t){H=e;var i=Q.children[0];f(i,it),f(K,Q),k(),p(X);var a=Q.parentNode;u(a,F+"-loading"),y(J,"search",[e,t,!(!B[e]||!B[e][t])]),v(g(U)+h(l(O.query,{callback:"_"+_,"max-results":G,q:n(e),"start-index":t})),function(){d(a,F+"-loading"),r(B[e])||(B[e]={});var n=et.innerHTML;B[e][t]=[et.children.length,n],N(e,t)})}function T(e){e&&e.preventDefault()}function S(){var e=this.q;e=e&&e.value,Z.innerHTML=V.title.replace("%s%",x(e)),Q.children[0].innerHTML="",e?(e=e.toLowerCase(),B[e]&&B[e][I]?N(e,I):M(e,I)):(f(K,X),p(Q))}function C(){var t=this;e.setTimeout(function(){ct?(ot&&e.clearTimeout(ot),ot=e.setTimeout(function(){S.call(J)},a(ct)?+ct:500)):""===t.value&&(f(K,X),p(Q))},1)}var L=e.q2o,j=t.currentScript,E=e.location,q=e.localStorage,H="",I=1,B={},_=Date.now(),D={i:_,direction:"ltr",url:E.protocol+"//"+E.host,name:"ajax-search",css:1,ad:!0,live:!0,source:'form[action$="/search"]',container:0,excerpt:0,image:0,target:0,chunk:50,text:{title:"Search results for query <em>%s%</em>",loading:"Searching&hellip;",previous:"Previous",next:"Next",empty:"No results for query <em>%s%</em>.",end:"No more results for query <em>%s%</em>."},query:{alt:"json",orderby:"updated"}},R=t.head,O=l(D,L(j.src)),J=t.querySelector(O.source);if(J){var A=O.i,U=O.id||m(O.url),F=O.name,W=O.ad,P=O.e;P=P&&e[P],W===!0&&(W=3);var z=L(E.search);r(z[A])&&(delete z[A].url,O=l(O,z[A]));var Y,V=O.text,G=O.chunk,K=O.container&&t.querySelector(O.container)||t.body,Q=c("div","<div></div>",{"class":F+" "+O.direction,id:F+":"+A}),X=c("div"),Z=c("h3","",{"class":F+"-title"}),et=c("ol","",{"class":F+"-results",id:F+"-results:"+A,start:I}),tt=c("nav","",{"class":F+"-pager",id:F+"-pager:"+A}),nt=c("a",V.previous,{"class":F+"-previous",href:"",rel:"prev"}),rt=c("a",V.next,{"class":F+"-next",href:"",rel:"next"}),it=c("p",V.loading,{"class":F+"-loading"});o(e,"scroll",k),o(e,"resize",k),e["_"+_]=function(e){e=e.feed||{};var r,i,s,m=e.entry||[],x=m.length,w=O.target,k=O.image,N=O.excerpt,M="has-title has-url";k&&(M+=" has-image"),N&&(M+=" has-excerpt"),u(Q,M),Y=function(e){if(e){var t=(e.published.$t,(e.link.find(function(e){return"alternate"===e.rel})||{}).href);if(str="",t){if(k){var n,r,i,s="media$thumbnail"in e;k===!0&&(k=80),a(k)?(n=r=k+"px",k="s"+k+"-c"):(i=/^s(\d+)(\-[cp])?$/.exec(k))?(n=i[1]+"px",r=i[2]?i[1]+"px":"auto"):(i=/^w(\d+)\-h(\d+)(\-[cp])?$/.exec(k))&&(n=i[1]+"px",r=i[2]+"px"),str+='<p class="'+F+"-image "+(s?"loading":"no-image")+'">',str+=s?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(\-c)?\//g,"/"+k+"/")+'" style="display:block;width:'+n+";height:"+r+';">':'<span class="img" style="display:block;width:'+n+";height:"+r+';">',str+="</p>"}if(str+='<h4 class="'+F+'-title"><a href="'+t+'"'+(w?' target="'+w+'"':"")+">"+$(e.title.$t)+"</a></h4>",N){var l=e.summary.$t.replace(/<.*?>/g,"").replace(/[<>]/g,"").trim(),o=l.length;N===!0&&(N=200),str+='<p class="'+F+"-excerpt"+(o?"":" no-excerpt")+'">'+$(l.slice(0,N))+(o>N?"&hellip;":"")+"</p>"}return c("li",str)}}},et.innerHTML="";for(r=0;x>r;++r)f(et,Y(m[r]));p(it),nt.style.display=I>1?"":"none",rt.style.display=G>x?"none":"",f(tt,nt),f(tt,t.createTextNode(" ")),f(tt,rt);var s=Q.children[0];if(f(s,Z),f(s,et),f(s,tt),k){var T=et.getElementsByTagName("img"),S=function(){u(this.parentNode,"error"),y(this,"error.asset",[this.src])},C=function(){d(this.parentNode,"loading"),y(this,"load.asset",[this.src])};for(r=0,i=T.length;i>r;++r)o(T[r],"error",S),o(T[r],"load",C)}b()&&v(g("298900102869691923")+h(l(O.query,{callback:"_"+_+"_","max-results":21,orderby:"updated"}))+"&q="+n(H))},e["_"+_+"_"]=function(e){e=e.feed||{};var t=e.entry||[];t=t[Math.floor(Math.random()*t.length)],(t=Y(t))&&(u(t,"ad"),f(et,t,et.firstChild)),y(t,"load.ad",[e])},j.id||(j.id=F+"-js"),u(j,F+"-js");var at=O.container,st=O.css;if(st&&!t.getElementById(F+"-css")&&v(i(st)?st:m(j.src,"css"),function(){y(this,"load.asset",[this.href])},{"class":F+"-css",id:F+"-css"}),at&&(at=t.querySelector(at))){for(var lt;lt=at.firstChild;)f(X,lt);f(at,X)}var ot,ct=O.live;o(J,"submit",function(t){et.start=I=1,ot&&e.clearTimeout(ot),S.call(this),T(t)}),["cut","input","keydown","paste"].forEach(function(e){o(J.q,e,C)}),o(nt,"click",function(e){et.start=I-=G,S.call(J),T(e)}),o(rt,"click",function(e){et.start=I+=G,S.call(J),T(e)}),y(Q,"ready",[O])}}(window,document);