/*! AJAX Search Widget for Blogger V2 <https://dte-project.github.io/blogger/search.html> */
!function(e,t){function r(e,t){function r(e){return decodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return i(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function o(e){if(i(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e))return+e;if(a(e))try{return JSON.parse(e)}catch(t){}}return e}function s(e,t,r){for(var n,i=t.split("["),a=0,o=i.length;o-1>a;++a)n=i[a].replace(/\]$/,""),e=e[n]||(e[n]={});e[i[a].replace(/\]$/,"")]=r}var l={},c=e.replace(/^.*?\?/,"");return""===c?l:(c.split(/&(?:amp;)?/).forEach(function(e){var i=e.split("="),a=r(i[0]),c=n(i[1])?r(i[1]):!0;c=!n(t)||t?o(c):c,"]"===a.slice(-1)?s(l,a,c):l[a]=c}),l)}e[t]=r}(window,"q2o"),function(e,t){function r(e){return encodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function o(e){return null!==e&&"object"==typeof e}function s(e,t){t=t||{};for(var r in e)n(t[r])?o(e[r])&&o(t[r])&&(t[r]=s(e[r],t[r])):t[r]=e[r];return t}function l(e,t,r){e.addEventListener(t,r,!1)}function c(e,r,i){if(e=t.createElement(e),n(r)&&""!==r&&(e.innerHTML=r),o(i))for(var a in i)i[a]!==!1&&e.setAttribute(a,i[a]);return e}function u(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.add(r)}function f(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.remove(r)}function d(e,t,r){t&&e.insertBefore(t,r)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t){var n,i=[];for(n in e)i.push(r(n)+"="+r(e[n]));return"?"+i.join(t||"&")}function m(e,t){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),n(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function g(e){return a(e)?("file:"===M.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":m(e)+"/feeds/posts/summary"}function v(e,t,r){var n=/\.css$/i.test(m(e)),i=c(n?"link":"script","",s(n?{href:e,rel:"stylesheet"}:{src:e},r));return i.readyState?i.onreadystatechange=function(){("loaded"===i.readyState||"complete"===i.readyState)&&(i.onreadystatechange=null,t&&t(i))}:t&&l(i,"load",t),d(R,i,R.firstChild),i}function y(){if(J!==!1){var e=+(C.getItem(A)||-1);if(e>J)return C.setItem(A,0),!0;C.setItem(A,++e)}return!1}function x(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b(e){if(!E)return e;var t=RegExp(E.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\\\$&"),"i");return e.replace(t,"<mark>$&</mark>")}function $(r){return e.getComputedStyle(t.body).getPropertyValue(r)}function w(){if(!z.container&&K.parentNode){var t="offset",r=D[t+"Top"],n=D[t+"Left"],i=D[t+"Width"],a=D[t+"Height"];u(K,A+"-float"),K.style.cssText="background-color:"+$("background-color")+";color:"+$("color")+";position:absolute;z-index:9999;top:"+(r+a)+"px;left:"+n+"px;width:"+i+"px;max-height:"+(e.innerHeight-r-a)+"px;overflow:auto;"}}function k(e,t){var r=I[e][t],n=K.children[0],i=1===j?"empty":"end";d(n,X),r[0]?(et.style.display=j>1?"":"none",tt.style.display=F>r[0]?"none":"",Y.innerHTML=r[1],d(n,Y)):(n.innerHTML='<p class="'+A+"-results-"+i+'">'+W[i].replace("%s%",x(E))+"</p>",tt.style.display="none"),d(n,Z),d(G,K),w(),p(Q)}function q(e,t){E=e;var i=K.children[0];d(i,rt),d(G,K),w(),p(Q);var a=K.parentNode;u(a,A+"-loading"),v(g(U)+h(s(z.query,{callback:"_"+_,"max-results":F,q:r(e),"start-index":t})),function(){f(a,A+"-loading"),n(I[e])||(I[e]={});var r=Y.innerHTML;I[e][j]=[Y.children.length,r],k(e,t)})}function T(e){e&&e.preventDefault()}function L(){var e=this.q;e=e&&e.value,X.innerHTML=W.title.replace("%s%",x(e)),K.children[0].innerHTML="",e?(e=e.toLowerCase(),I[e]&&I[e][j]?k(e,j):q(e,j)):(d(G,Q),p(K))}function N(){var t=this;e.setTimeout(function(){st?(ot&&e.clearTimeout(ot),ot=e.setTimeout(function(){L.call(D)},a(st)?+st:500)):""===t.value&&(d(G,Q),p(K))},1)}var S=e.q2o,H=t.currentScript,M=e.location,C=e.localStorage,E="",j=1,I={},_=Date.now(),B={i:_,direction:"ltr",url:M.protocol+"//"+M.host,name:"ajax-search",css:1,ad:!0,live:!0,source:'form[action$="/search"]',container:0,excerpt:0,image:0,target:0,chunk:50,text:{title:"Search results for query <em>%s%</em>",loading:"Searching&hellip;",previous:"Previous",next:"Next",empty:"No results for query <em>%s%</em>.",end:"No more results for query <em>%s%</em>."},query:{alt:"json",orderby:"updated"}},R=t.head,z=s(B,S(H.src)),D=t.querySelector(z.source);if(D){var P=z.i,U=z.id||m(z.url),A=z.name,J=z.ad;J===!0&&(J=3);var O=S(M.search);n(O[P])&&(delete O[P].url,z=s(z,O[P]));var V,W=z.text,F=z.chunk,G=z.container&&t.querySelector(z.container)||t.body,K=c("div","<div></div>",{"class":A+" "+z.direction,id:A+":"+P}),Q=c("div"),X=c("h3","",{"class":A+"-title"}),Y=c("ol","",{"class":A+"-results",id:A+"-results:"+P,start:j}),Z=c("nav","",{"class":A+"-pager",id:A+"-pager:"+P}),et=c("a",W.previous,{"class":A+"-previous",href:"",rel:"prev"}),tt=c("a",W.next,{"class":A+"-next",href:"",rel:"next"}),rt=c("p",W.loading,{"class":A+"-loading"});l(e,"resize",w),e["_"+_]=function(e){e=e.feed||{};var n,i,o,m=e.entry||[],x=m.length,$=z.target,w=z.image,k=z.excerpt,q="has-title has-url";w&&(q+=" has-image"),k&&(q+=" has-excerpt"),u(K,q),V=function(e){if(e){var t=(e.published.$t,(e.link.find(function(e){return"alternate"===e.rel})||{}).href);if(str="",t){if(w){var r,n,i,o="media$thumbnail"in e;w===!0&&(w=80),a(w)?(r=n=w+"px",w="s"+w+"-c"):(i=/^s(\d+)(\-[cp])?$/.exec(w))?(r=i[1]+"px",n=i[2]?i[1]+"px":"auto"):(i=/^w(\d+)\-h(\d+)(\-[cp])?$/.exec(w))&&(r=i[1]+"px",n=i[2]+"px"),str+='<p class="'+A+"-image "+(o?"loading":"no-image")+'">',str+=o?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(\-c)?\//g,"/"+w+"/")+'" style="display:block;width:'+r+";height:"+n+';">':'<span class="img" style="display:block;width:'+r+";height:"+n+';">',str+="</p>"}if(str+='<h4 class="'+A+'-title"><a href="'+t+'"'+($?' target="'+$+'"':"")+">"+b(e.title.$t)+"</a></h4>",k){var s=e.summary.$t.replace(/<.*?>/g,"").replace(/[<>]/g,"").trim(),l=s.length;k===!0&&(k=200),str+='<p class="'+A+"-excerpt"+(l?"":" no-excerpt")+'">'+b(s.slice(0,k))+(l>k?"&hellip;":"")+"</p>"}return c("li",str)}}},Y.innerHTML="";for(n=0;x>n;++n)d(Y,V(m[n]));p(rt),et.style.display=j>1?"":"none",tt.style.display=F>x?"none":"",d(Z,et),d(Z,t.createTextNode(" ")),d(Z,tt);var o=K.children[0];if(d(o,X),d(o,Y),d(o,Z),w){var T=Y.getElementsByTagName("img"),L=function(){u(this.parentNode,"error")},N=function(){f(this.parentNode,"loading")};for(n=0,i=T.length;i>n;++n)l(T[n],"error",L),l(T[n],"load",N)}y()&&v(g("298900102869691923")+h(s(z.query,{callback:"_"+_+"_","max-results":21,orderby:"updated"}))+"&q="+r(E))},e["_"+_+"_"]=function(e){e=e.feed||{};var t=e.entry||[];t=t[Math.floor(Math.random()*t.length)],(t=V(t))&&(u(t,"ad"),d(Y,t,Y.firstChild))},H.id||(H.id=A+"-js"),u(H,A+"-js");var nt=z.container,it=z.css;if(it&&!t.getElementById(A+"-css")&&v(i(it)?it:m(H.src,"css"),0,{"class":A+"-css",id:A+"-css"}),nt&&(nt=t.querySelector(nt))){for(var at;at=nt.firstChild;)d(Q,at);d(nt,Q)}var ot,st=z.live;l(D,"submit",function(t){Y.start=j=1,ot&&e.clearTimeout(ot),L.call(this),T(t)}),["cut","input","keydown","paste"].forEach(function(e){l(D.q,e,N)}),l(et,"click",function(e){Y.start=j-=F,L.call(D),T(e)}),l(tt,"click",function(e){Y.start=j+=F,L.call(D),T(e)})}}(window,document);