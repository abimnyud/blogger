/*! AJAX Search Widget for Blogger V2 <https://dte-project.github.io/blogger/search.html> */
!function(e,t){function r(e,t){function r(e){return decodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return i(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function o(e){if(i(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e))return+e;if(a(e))try{return JSON.parse(e)}catch(t){}}return e}function s(e,t,r){for(var n,i=t.split("["),a=0,o=i.length;o-1>a;++a)n=i[a].replace(/\]$/,""),e=e[n]||(e[n]={});e[i[a].replace(/\]$/,"")]=r}var l={},c=e.replace(/^.*?\?/,"");return""===c?l:(c.split(/&(?:amp;)?/).forEach(function(e){var i=e.split("="),a=r(i[0]),c=n(i[1])?r(i[1]):!0;c=!n(t)||t?o(c):c,"]"===a.slice(-1)?s(l,a,c):l[a]=c}),l)}e[t]=r}(window,"q2o"),function(e,t){function r(e){return encodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function o(e){return null!==e&&"object"==typeof e}function s(e,t){t=t||{};for(var r in e)n(t[r])?o(e[r])&&o(t[r])&&(t[r]=s(e[r],t[r])):t[r]=e[r];return t}function l(e,t,r){e.addEventListener(t,r,!1)}function c(e,r,i){if(e=t.createElement(e),n(r)&&""!==r&&(e.innerHTML=r),o(i))for(var a in i)i[a]!==!1&&e.setAttribute(a,i[a]);return e}function u(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.add(r)}function d(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.remove(r)}function f(e,t,r){t&&e.insertBefore(t,r)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t){var n,i=[];for(n in e)i.push(r(n)+"="+r(e[n]));return"?"+i.join(t||"&")}function m(e,t){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),n(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function g(e){return a(e)?("file:"===C.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":m(e)+"/feeds/posts/summary"}function y(e,t,r){var n=/\.css$/i.test(m(e)),i=c(n?"link":"script","",s(n?{href:e,rel:"stylesheet"}:{src:e},r));return i.readyState?i.onreadystatechange=function(){("loaded"===i.readyState||"complete"===i.readyState)&&(i.onreadystatechange=null,t&&t(i))}:t&&l(i,"load",t),f(B,i,B.firstChild),i}function v(){if(P!==!1){var e=+(E.getItem(U)||-1);if(e>P)return E.setItem(U,0),!0;E.setItem(U,++e)}return!1}function x(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b(e){if(!j)return e;var t=RegExp(j.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\\\$&"),"i");return e.replace(t,"<mark>$&</mark>")}function $(r){return e.getComputedStyle(t.body).getPropertyValue(r)}function w(){if(!R.container&&V.parentNode){var t=O.offsetTop,r=O.offsetLeft,n=O.offsetWidth,i=O.offsetHeight;u(V,U+"-float"),V.style.cssText="background-color:"+$("background-color")+";color:"+$("color")+";position:absolute;z-index:9999;top:"+(t+i)+"px;left:"+r+"px;width:"+n+"px;max-height:"+(e.innerHeight-t-i)+"px;overflow:auto;"}}function k(e,t){var r=_[e][t],n=V.children[0];f(n,K),r[0]?(Z.style.display=H>1?"":"none",et.style.display=W>r[0]?"none":"",Q.innerHTML=r[1],f(n,Q)):(n.innerHTML="<p>"+Y[1===H?"empty":"end"].replace("%s%",x(j))+"</p>",et.style.display="none"),f(n,X),f(F,V),w(),p(G)}function T(e,t){j=e;var i=V.children[0];f(i,tt),f(F,V),w(),p(G);var a=V.parentNode;u(a,U+"-loading"),y(g(J)+h(s(R.query,{callback:"_"+I,"max-results":W,q:r(e),"start-index":t})),function(){d(a,U+"-loading"),n(_[e])||(_[e]={});var r=Q.innerHTML;_[e][H]=[Q.children.length,r],k(e,t)})}function N(e){e&&e.preventDefault()}function q(){var e=this.q;e=e&&e.value,K.innerHTML=Y.title.replace("%s%",x(e)),V.children[0].innerHTML="",e?(e=e.toLowerCase(),_[e]&&_[e][H]?k(e,H):T(e,H)):(f(F,G),p(V))}function S(){var t=this;e.setTimeout(function(){st?(ot&&e.clearTimeout(ot),ot=e.setTimeout(function(){q.call(O)},a(st)?+st:500)):""===t.value&&(f(F,G),p(V))},1)}var M=e.q2o,L=t.currentScript,C=e.location,E=e.localStorage,j="",H=1,_={},I=Date.now(),D={i:I,direction:"ltr",url:C.protocol+"//"+C.host,name:"ajax-search",css:1,ad:!0,live:!0,source:'form[action$="/search"]',container:0,excerpt:0,image:0,target:0,chunk:50,text:{title:"Search results for query <em>%s%</em>",loading:"Searching&hellip;",previous:"Previous",next:"Next",empty:"No results for query <em>%s%</em>.",end:"No more results for query <em>%s%</em>."},query:{alt:"json",orderby:"updated"}},B=t.head,R=s(D,M(L.src)),O=t.querySelector(R.source);if(O){var A,z=R.i,J=R.id||m(R.url),U=R.name,P=R.ad,Y=R.text,W=R.chunk,F=R.container&&t.querySelector(R.container)||t.body,V=c("div","<div></div>",{"class":U+" "+R.direction,id:U+":"+z}),G=c("div"),K=c("h3","",{"class":U+"-title"}),Q=c("ol","",{"class":U+"-results",id:U+"-results:"+z,start:H}),X=c("nav","",{"class":U+"-pager",id:U+"-pager:"+z}),Z=c("a",Y.previous,{"class":U+"-previous",href:"",rel:"prev"}),et=c("a",Y.next,{"class":U+"-next",href:"",rel:"next"}),tt=c("p",Y.loading,{"class":U+"-loading"});P===!0&&(P=3);var rt=M(C.search);n(rt[z])&&(delete rt[z].url,R=s(R,rt[z])),l(e,"resize",w),e["_"+I]=function(e){e=e.feed||{};var n,i,o,m=e.entry||[],x=m.length,$=R.target,w=R.image,k=R.excerpt,T="has-title has-url";w&&(T+=" has-image"),k&&(T+=" has-excerpt"),u(V,T),A=function(e){if(e){var t=(e.published.$t,(e.link.find(function(e){return"alternate"===e.rel})||{}).href);if(str="",t){if(w){var r,n,i,o="media$thumbnail"in e;w===!0&&(w=80),a(w)?(r=n=w+"px",w="s"+w+"-c"):(i=/^s(\d+)(\-[cp])?$/.exec(w))?(r=i[1]+"px",n=i[2]?i[1]+"px":"auto"):(i=/^w(\d+)\-h(\d+)(\-[cp])?$/.exec(w))&&(r=i[1]+"px",n=i[2]+"px"),str+='<p class="'+U+"-image "+(o?"loading":"no-image")+'">',str+=o?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(\-c)?\//g,"/"+w+"/")+'" style="display:block;width:'+r+";height:"+n+';">':'<span class="img" style="display:block;width:'+r+";height:"+n+';">',str+="</p>"}if(str+='<h4 class="'+U+'-title"><a href="'+t+'"'+($?' target="'+$+'"':"")+">"+b(e.title.$t)+"</a></h4>",k){var s=e.summary.$t.replace(/<.*?>/g,"").replace(/[<>]/g,"").trim(),l=s.length;k===!0&&(k=200),str+='<p class="'+U+"-excerpt"+(l?"":" no-excerpt")+'">'+b(s.slice(0,k))+(l>k?"&hellip;":"")+"</p>"}return c("li",str)}}},Q.innerHTML="";for(n=0;x>n;++n)f(Q,A(m[n]));p(tt),Z.style.display=H>1?"":"none",et.style.display=W>x?"none":"",f(X,Z),f(X,t.createTextNode(" ")),f(X,et);var o=V.children[0];if(f(o,K),f(o,Q),f(o,X),w){var N=Q.getElementsByTagName("img"),q=function(){u(this.parentNode,"error")},S=function(){d(this.parentNode,"loading")};for(n=0,i=N.length;i>n;++n)l(N[n],"error",q),l(N[n],"load",S)}v()&&y(g("298900102869691923")+h(s(R.query,{callback:"_"+I+"_","max-results":21,orderby:"updated"}))+"&q="+r(j))},e["_"+I+"_"]=function(e){e=e.feed||{};var t=e.entry||[];t=t[Math.floor(Math.random()*t.length)],(t=A(t))&&(u(t,"ad"),f(Q,t,Q.firstChild))},L.id||(L.id=U+"-js"),u(L,U+"-js");var nt=R.container,it=R.css;if(it&&!t.getElementById(U+"-css")&&y(i(it)?it:m(L.src,"css"),0,{"class":U+"-css",id:U+"-css"}),nt&&(nt=t.querySelector(nt))){for(var at;at=nt.firstChild;)f(G,at);f(nt,G)}var ot,st=R.live;l(O,"submit",function(t){Q.start=H=1,ot&&e.clearTimeout(ot),q.call(this),N(t)}),["cut","input","keydown","paste"].forEach(function(e){l(O.q,e,S)}),l(Z,"click",function(e){Q.start=H-=W,q.call(O),N(e)}),l(et,"click",function(e){Q.start=H+=W,q.call(O),N(e)})}}(window,document);