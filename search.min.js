/*! AJAX Search Widget for Blogger V2 <https://dte-project.github.io/blogger/search.html> */
!function(e,t){function r(e,t){function r(e){return decodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return i(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function s(e){if(i(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e))return+e;if(a(e))try{return JSON.parse(e)}catch(t){}}return e}function o(e,t,r){for(var n,i=t.split("["),a=0,s=i.length;s-1>a;++a)n=i[a].replace(/\]$/,""),e=e[n]||(e[n]={});e[i[a].replace(/\]$/,"")]=r}var l={},c=e.replace(/^.*?\?/,"");return""===c?l:(c.split(/&(?:amp;)?/).forEach(function(e){var i=e.split("="),a=r(i[0]),c=n(i[1])?r(i[1]):!0;c=!n(t)||t?s(c):c,"]"===a.slice(-1)?o(l,a,c):l[a]=c}),l)}e[t]=r}(window,"q2o"),function(e,t){function r(e){return encodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function s(e){return null!==e&&"object"==typeof e}function o(e,t){t=t||{};for(var r in e)n(t[r])?s(e[r])&&s(t[r])&&(t[r]=o(e[r],t[r])):t[r]=e[r];return t}function l(e,t,r){e.addEventListener(t,r,!1)}function c(e,r,i){if(e=t.createElement(e),n(r)&&""!==r&&(e.innerHTML=r),s(i))for(var a in i)i[a]!==!1&&e.setAttribute(a,i[a]);return e}function u(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.add(r)}function d(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.remove(r)}function f(e,t,r){t&&e.insertBefore(t,r)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t){var n,i=[];for(n in e)i.push(r(n)+"="+r(e[n]));return"?"+i.join(t||"&")}function m(e,t){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),n(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function g(e){return a(e)?("file:"===C.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":m(e)+"/feeds/posts/summary"}function y(e,t,r){var n=/\.css$/i.test(m(e)),i=c(n?"link":"script","",o(n?{href:e,rel:"stylesheet"}:{src:e},r));return i.readyState?i.onreadystatechange=function(){("loaded"===i.readyState||"complete"===i.readyState)&&(i.onreadystatechange=null,t&&t(i))}:t&&l(i,"load",t),f(B,i,B.firstChild),i}function v(){if(P!==!1){var e=+(E.getItem(U)||-1);if(e>P)return E.setItem(U,0),!0;E.setItem(U,++e)}return!1}function x(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b(e){if(!j)return e;var t=RegExp(j.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\\\$&"),"i");return e.replace(t,"<mark>$&</mark>")}function $(r){return e.getComputedStyle(t.body).getPropertyValue(r)}function w(){if(!R.container&&V.parentNode){var t=O.getBoundingClientRect(),r=t.top,n=(t.left,t.width),i=t.height;u(V,U+"-float"),V.style.cssText="background-color:"+$("background-color")+";color:"+$("color")+";position:absolute;z-index:9999;top:"+(r+i)+"px;left:"+t.left+"px;width:"+n+"px;max-height:"+(e.innerHeight-r-i)+"px;overflow:auto;"}}function k(e,t){var r=H[e][t],n=V.children[0];f(n,K),r[0]?(Z.style.display=_>1?"":"none",et.style.display=F>r[0]?"none":"",Q.innerHTML=r[1],f(n,Q)):(n.innerHTML="<p>"+Y[1===_?"empty":"end"].replace("%s%",x(j))+"</p>",et.style.display="none"),f(n,X),f(W,V),w(),p(G)}function N(e,t){j=e;var i=V.children[0];f(i,tt),f(W,V),w(),p(G);var a=V.parentNode;u(a,U+"-loading"),y(g(J)+h(o(R.query,{callback:"_"+I,"max-results":F,q:r(e),"start-index":t})),function(){d(a,U+"-loading"),n(H[e])||(H[e]={});var r=Q.innerHTML;H[e][_]=[Q.children.length,r],k(e,t)})}function T(e){e&&e.preventDefault()}function S(){var e=this.q;e=e&&e.value,V.children[0].innerHTML="",e?(e=e.toLowerCase(),H[e]&&H[e][_]?k(e,_):N(e,_)):(f(W,G),p(V))}function M(){var t=this;e.setTimeout(function(){ot?(st&&e.clearTimeout(st),st=e.setTimeout(function(){S.call(O)},a(ot)?+ot:500)):""===t.value&&(f(W,G),p(V))},1)}var q=e.q2o,L=t.currentScript,C=e.location,E=e.localStorage,j="",_=1,H={},I=Date.now(),D={i:I,direction:"ltr",url:C.protocol+"//"+C.host,name:"ajax-search",css:1,ad:!0,live:!0,source:'form[action$="/search"]',container:0,excerpt:0,image:0,target:0,chunk:50,text:{title:"Search results for query <em>%s%</em>",loading:"Searching&hellip;",previous:"Previous",next:"Next",empty:"No results for query <em>%s%</em>.",end:"No more results for query <em>%s%</em>."},query:{alt:"json",orderby:"updated"}},B=t.head,R=o(D,q(L.src)),O=t.querySelector(R.source);if(O){var A,z=R.i,J=R.id||m(R.url),U=R.name,P=R.ad,Y=R.text,F=R.chunk,W=R.container&&t.querySelector(R.container)||t.body,V=c("div","<div></div>",{"class":U+" "+R.direction,id:U+":"+z}),G=c("div"),K=c("h3","",{"class":U+"-title"}),Q=c("ol","",{"class":U+"-results",id:U+"-results:"+z,start:_}),X=c("nav","",{"class":U+"-pager",id:U+"-pager:"+z}),Z=c("a",Y.previous,{"class":U+"-previous",href:"",rel:"prev"}),et=c("a",Y.next,{"class":U+"-next",href:"",rel:"next"}),tt=c("p",Y.loading,{"class":U+"-loading"});P===!0&&(P=3);var rt=q(C.search);n(rt[z])&&(delete rt[z].url,R=o(R,rt[z])),l(e,"resize",w),e["_"+I]=function(e){e=e.feed||{};var n,i,s,m=e.entry||[],$=m.length,w=R.target,k=R.image,N=R.excerpt,T="has-title has-url";k&&(T+=" has-image"),N&&(T+=" has-excerpt"),u(V,T),A=function(e){if(e){var t=(e.published.$t,(e.link.find(function(e){return"alternate"===e.rel})||{}).href);if(str="",t){if(k){var r,n,i,s="media$thumbnail"in e;k===!0&&(k=80),a(k)?(r=n=k+"px",k="s"+k+"-c"):(i=/^s(\d+)(\-[cp])?$/.exec(k))?(r=i[1]+"px",n=i[2]?i[1]+"px":"auto"):(i=/^w(\d+)\-h(\d+)(\-[cp])?$/.exec(k))&&(r=i[1]+"px",n=i[2]+"px"),str+='<p class="'+U+"-image "+(s?"loading":"no-image")+'">',str+=s?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(\-c)?\//g,"/"+k+"/")+'" style="display:block;width:'+r+";height:"+n+';">':'<span class="img" style="display:block;width:'+r+";height:"+n+';">',str+="</p>"}if(str+='<h4 class="'+U+'-title"><a href="'+t+'"'+(w?' target="'+w+'"':"")+">"+b(e.title.$t)+"</a></h4>",N){var o=e.summary.$t.replace(/<.*?>/g,"").replace(/[<>]/g,"").trim(),l=o.length;N===!0&&(N=200),str+='<p class="'+U+"-excerpt"+(l?"":" no-excerpt")+'">'+b(o.slice(0,N))+(l>N?"&hellip;":"")+"</p>"}return c("li",str)}}},Q.innerHTML="",K.innerHTML=Y.title.replace("%s%",x(j));for(n=0;$>n;++n)f(Q,A(m[n]));p(tt),Z.style.display=_>1?"":"none",et.style.display=F>$?"none":"",f(X,Z),f(X,t.createTextNode(" ")),f(X,et);var s=V.children[0];if(f(s,K),f(s,Q),f(s,X),k){var S=Q.getElementsByTagName("img"),M=function(){u(this.parentNode,"error")},q=function(){d(this.parentNode,"loading")};for(n=0,i=S.length;i>n;++n)l(S[n],"error",M),l(S[n],"load",q)}v()&&y(g("298900102869691923")+h(o(R.query,{callback:"_"+I+"_","max-results":21,orderby:"updated"}))+"&q="+r(j))},e["_"+I+"_"]=function(e){e=e.feed||{};var t=e.entry||[];t=t[Math.floor(Math.random()*t.length)],(t=A(t))&&(u(t,"ad"),f(Q,t,Q.firstChild))},L.id||(L.id=U+"-js"),u(L,U+"-js");var nt=R.container,it=R.css;if(it&&!t.getElementById(U+"-css")&&y(i(it)?it:m(L.src,"css"),0,{"class":U+"-css",id:U+"-css"}),nt&&(nt=t.querySelector(nt))){for(var at;at=nt.firstChild;)f(G,at);f(nt,G)}var st,ot=R.live;l(O,"submit",function(t){Q.start=_=1,st&&e.clearTimeout(st),S.call(this),T(t)}),["cut","input","keydown","paste"].forEach(function(e){l(O.q,e,M)}),l(Z,"click",function(e){Q.start=_-=F,S.call(O),T(e)}),l(et,"click",function(e){Q.start=_+=F,S.call(O),T(e)})}}(window,document);