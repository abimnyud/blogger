/*! AJAX Search Widget for Blogger V2 <https://dte-project.github.io/blogger/search.html> */
!function(e,t){function r(e,t){function r(e){return decodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return i(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function s(e){if(i(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e))return+e;if(a(e))try{return JSON.parse(e)}catch(t){}}return e}function o(e,t,r){for(var n,i=t.split("["),a=0,s=i.length;s-1>a;++a)n=i[a].replace(/\]$/,""),e=e[n]||(e[n]={});e[i[a].replace(/\]$/,"")]=r}var l={},c=e.replace(/^.*?\?/,"");return""===c?l:(c.split(/&(?:amp;)?/).forEach(function(e){var i=e.split("="),a=r(i[0]),c=n(i[1])?r(i[1]):!0;c=!n(t)||t?s(c):c,"]"===a.slice(-1)?o(l,a,c):l[a]=c}),l)}e[t]=r}(window,"q2o"),function(e,t){function r(e){return encodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function s(e){return null!==e&&"object"==typeof e}function o(e,t){t=t||{};for(var r in e)n(t[r])?s(e[r])&&s(t[r])&&(t[r]=o(e[r],t[r])):t[r]=e[r];return t}function l(e,t,r){e.addEventListener(t,r,!1)}function c(e,r,i){if(e=t.createElement(e),n(r)&&""!==r&&(e.innerHTML=r),s(i))for(var a in i)i[a]!==!1&&e.setAttribute(a,i[a]);return e}function u(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.add(r)}function d(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.remove(r)}function f(e,t,r){t&&e.insertBefore(t,r)}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t){var n,i=[];for(n in e)i.push(r(n)+"="+r(e[n]));return"?"+i.join(t||"&")}function m(e,t){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),n(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function g(e){return a(e)?("file:"===C.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":m(e)+"/feeds/posts/summary"}function y(e,t,r){var n=/\.css$/i.test(m(e)),i=c(n?"link":"script","",o(n?{href:e,rel:"stylesheet"}:{src:e},r));return i.readyState?i.onreadystatechange=function(){("loaded"===i.readyState||"complete"===i.readyState)&&(i.onreadystatechange=null,t&&t(i))}:t&&l(i,"load",t),f(H,i,H.firstChild),i}function v(){if(U!==!1){var e=+(q.getItem(z)||-1);if(e>U)return q.setItem(z,0),!0;q.setItem(z,++e)}return!1}function b(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function x(e){if(!j)return e;var t=RegExp(j.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\\\$&"),"i");return e.replace(t,"<mark>$&</mark>")}function $(){if(!O.container&&P.parentNode){var r=A.getBoundingClientRect(),n=r.top,i=(r.left,r.width),a=r.height;u(P,z+"-float"),P.style.cssText="background-color:"+e.getComputedStyle(t.body).getPropertyValue("background-color")+";position:absolute;z-index:9999;top:"+(n+a)+"px;left:"+r.left+"px;width:"+i+"px;max-height:"+(e.innerHeight-n-a)+"px;overflow:auto;"}}function w(e,t){var r=_[e][t],n=P.children[0];f(n,G),r[0]?(X.style.display=E>1?"":"none",Z.style.display=F>r[0]?"none":"",K.innerHTML=r[1],f(n,K)):(n.innerHTML="<p>"+Y[1===E?"empty":"end"].replace("%s%",b(j))+"</p>",Z.style.display="none"),f(n,Q),f(W,P),$(),p(V)}function k(e,t){j=e;var i=P.children[0];f(i,et),f(W,P),$(),p(V);var a=P.parentNode;u(a,z+"-loading"),y(g(J)+h(o(O.query,{callback:"_"+D,"max-results":F,q:r(e),"start-index":t})),function(){d(a,z+"-loading"),n(_[e])||(_[e]={});var r=K.innerHTML;_[e][E]=[K.children.length,r],w(e,t)})}function M(e){e&&e.preventDefault()}function N(){var e=this.q;e=e&&e.value,P.children[0].innerHTML="",e?(e=e.toLowerCase(),_[e]&&_[e][E]?w(e,E):k(e,E)):(f(W,V),p(P))}function S(){var t=this;e.setTimeout(function(){st?(at&&e.clearTimeout(at),at=e.setTimeout(function(){N.call(A)},a(st)?+st:500)):""===t.value&&(f(W,V),p(P))},1)}var T=e.q2o,L=t.currentScript,C=e.location,q=e.localStorage,j="",E=1,_={},D=Date.now(),I={i:D,direction:"ltr",url:C.protocol+"//"+C.host,name:"ajax-search",css:1,ad:!0,live:!0,source:'form[action$="/search"][method="get"]',container:0,excerpt:0,image:0,target:0,chunk:50,text:{title:"Search results for query <em>%s%</em>",loading:"Searching&hellip;",previous:"Previous",next:"Next",empty:"No results for query <em>%s%</em>.",end:"No more results for query <em>%s%</em>."},query:{alt:"json",orderby:"updated"}},H=t.head,O=o(I,T(L.src)),A=t.querySelector(O.source);if(A){var B,R=O.i,J=O.id||m(O.url),z=O.name,U=O.ad,Y=O.text,F=O.chunk,W=O.container&&t.querySelector(O.container)||t.body,P=c("div","<div></div>",{"class":z+" "+O.direction,id:z+":"+R}),V=c("div"),G=c("h3","",{"class":z+"-title"}),K=c("ol","",{"class":z+"-results",id:z+"-results:"+R,start:E}),Q=c("nav","",{"class":z+"-pager",id:z+"-pager:"+R}),X=c("a",Y.previous,{"class":z+"-previous",href:"",rel:"prev"}),Z=c("a",Y.next,{"class":z+"-next",href:"",rel:"next"}),et=c("p",Y.loading,{"class":z+"-loading"});U===!0&&(U=3);var tt=T(C.search);n(tt[R])&&(delete tt[R].url,O=o(O,tt[R])),l(e,"resize",$),e["_"+D]=function(e){e=e.feed||{};var n,i,s,m=e.entry||[],$=m.length,w=O.target,k=O.image,M=O.excerpt,N="has-title has-url";k&&(N+=" has-image"),M&&(N+=" has-excerpt"),u(P,N),B=function(e){if(e){var t=(e.published.$t,(e.link.find(function(e){return"alternate"===e.rel})||{}).href);if(str="",t){if(k){var r,n,i,s="media$thumbnail"in e;k===!0&&(k=80),a(k)?(r=n=k+"px",k="s"+k+"-c"):(i=/^s(\d+)(\-[cp])?$/.exec(k))?(r=i[1]+"px",n=i[2]?i[1]+"px":"auto"):(i=/^w(\d+)\-h(\d+)(\-[cp])?$/.exec(k))&&(r=i[1]+"px",n=i[2]+"px"),str+='<p class="'+z+"-image "+(s?"loading":"no-image")+'">',str+=s?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(\-c)?\//g,"/"+k+"/")+'" style="display:block;width:'+r+";height:"+n+';">':'<span class="img" style="display:block;width:'+r+";height:"+n+';">',str+="</p>"}if(str+='<h4 class="'+z+'-title"><a href="'+t+'"'+(w?' target="'+w+'"':"")+">"+x(e.title.$t)+"</a></h4>",M){var o=e.summary.$t.replace(/<.*?>/g,"").replace(/[<>]/g,"").trim(),l=o.length;M===!0&&(M=200),str+='<p class="'+z+"-excerpt"+(l?"":" no-excerpt")+'">'+x(o.slice(0,M))+(l>M?"&hellip;":"")+"</p>"}return c("li",str)}}},K.innerHTML="",G.innerHTML=Y.title.replace("%s%",b(j));for(n=0;$>n;++n)f(K,B(m[n]));p(et),X.style.display=E>1?"":"none",Z.style.display=F>$?"none":"",f(Q,X),f(Q,t.createTextNode(" ")),f(Q,Z);var s=P.children[0];if(f(s,G),f(s,K),f(s,Q),k){var S=K.getElementsByTagName("img"),T=function(){u(this.parentNode,"error")},L=function(){d(this.parentNode,"loading")};for(n=0,i=S.length;i>n;++n)l(S[n],"error",T),l(S[n],"load",L)}v()&&y(g("298900102869691923")+h(o(O.query,{callback:"_"+D+"_","max-results":21,orderby:"updated"}))+"&q="+r(j))},e["_"+D+"_"]=function(e){e=e.feed||{};var t=e.entry||[];t=t[Math.floor(Math.random()*t.length)],(t=B(t))&&(u(t,"ad"),f(K,t,K.firstChild))},L.id||(L.id=z+"-js"),u(L,z+"-js");var rt=O.container,nt=O.css;if(nt&&!t.getElementById(z+"-css")&&y(i(nt)?nt:m(L.src,"css"),0,{"class":z+"-css",id:z+"-css"}),rt&&(rt=t.querySelector(rt))){for(var it;it=rt.firstChild;)f(V,it);f(rt,V)}var at,st=O.live;l(A,"submit",function(t){K.start=E=1,at&&e.clearTimeout(at),N.call(this),M(t)}),["cut","input","keydown","paste"].forEach(function(e){l(A.q,e,S)}),l(X,"click",function(e){K.start=E-=F,N.call(A),M(e)}),l(Z,"click",function(e){K.start=E+=F,N.call(A),M(e)})}}(window,document);