/*! Tabbed TOC for Blogger V2 <https://dte-project.github.io/blogger/tabbed-toc.html> */
!function(e,t){function r(e){return encodeURIComponent(e)}function n(e){return decodeURIComponent(e)}function a(e){return void 0!==e}function i(e){return"string"==typeof e}function l(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function s(e){return"object"==typeof e}function o(e){return i(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function c(e){if(i(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e)&&e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER)return+e;if(o(e))try{return JSON.parse(e)}catch(t){}}return e}function u(e,t,r){for(var n,a=t.split("["),i=0,l=a.length;l-1>i;++i)n=a[i].replace(/\]$/,""),e=e[n]||(e[n]={});e[a[i].replace(/\]$/,"")]=r}function d(e,t){var r={},i=e.replace(/^.*?\?/,"");return""===i?r:(i.split(/&(?:amp;)?/).forEach(function(e){var i=e.split("="),l=n(i[0]),s=a(i[1])?n(i[1]):!0;s=!a(t)||t?c(s):s,"]"===l.slice(-1)?u(r,l,s):r[l]=s}),r)}function p(e,t){t=t||{};for(var r in e)a(t[r])?s(e[r])&&s(t[r])&&(t[r]=p(e[r],t[r])):t[r]=e[r];return t}function f(e,t,r){e.addEventListener(t,r,!1)}function h(e,r,n){if(e=t.createElement(e),a(r)&&""!==r&&(e.innerHTML=r),s(n))for(var i in n)n[i]!==!1&&e.setAttribute(i,n[i]);return e}function m(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.add(r)}function y(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.remove(r)}function g(e,t,r){e.insertBefore(t,r)}function v(e){e.parentNode&&e.parentNode.removeChild(e)}function b(e,t){var n,a=[];for(n in e)a.push(r(n)+"="+r(e[n]));return"?"+a.join(t||"&")}function x(e,t){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),a(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function $(e){return l(e)?("file:"===D.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":x(e)+"/feeds/posts/summary"}function M(e,t,r){var n=/\.css$/i.test(x(e)),a=h(n?"link":"script","",p(n?{href:e,rel:"stylesheet"}:{src:e},r));return a.readyState?a.onreadystatechange=function(){("loaded"===a.readyState||"complete"===a.readyState)&&(a.onreadystatechange=null,t(a))}:f(a,"load",t),g(q,a,q.firstChild),a}function N(){if(J!==!1){var e=+(I.getItem(F)||-1);if(e>J)return I.setItem(F,0),!0;I.setItem(F,++e)}return!1}function _(e,t){var r,n=e.split("T"),a=n[0].split("-"),i=n[1].split("+")[0].split(":"),l=+i[0],s=l%12||12,o={"M\\+":O.months[+a[1]-1],"D\\+":O.days[new Date(e).getDay()],"h\\+":l+"",Y:a[0],M:a[1],D:a[2],h:s+"",m:i[1],s:Math.floor(+i[2])+"","\\?":O.midday[12>s||24===s?0:1]};for(r in o)t=t.replace(RegExp("%"+r,"g"),o[r]);return t}function S(){var e=j.container,r=j.css;r&&M(i(r)?r:x(T.src,"css")),M($(H)+b(p(j.query,{callback:"_"+(R-1),"max-results":0})),function(){e?(e=t.querySelector(e),e&&(e.innerHTML=""),g(e,Y)):g(T.parentNode,Y,T),y(Y.parentNode,F+"-loading")})}var w,T=t.currentScript||t.getElementsByTagName("script").pop(),k={},E=[],L={},C=9999,D=e.location,I=e.localStorage,A={direction:"ltr",hash:Date.now(),url:D.protocol+"//"+D.host,name:"tabbed-toc",css:x(T.src,"css").replace(".alt.","."),sort:-1,ad:!0,active:0,container:0,tab:"%Y %M+",date:"%M+ %D, %Y %h:%m %?",excerpt:0,image:0,target:0,load:0,recent:0,hide:[],text:{title:"Table of Content",loading:"Loading&hellip;",midday:["AM","PM"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],recent:" <sup>New!</sup>"},query:{alt:"json-in-script",orderby:"published","max-results":C,"start-index":1}},q=t.head,j=p(A,d(T.src)),R=j.hash,H=j.id||x(j.url),F=j.name,J=j.ad,O=j.text,Y=h("div",'<h3 class="'+F+'-title">'+O.title+"</h3>",{"class":F+" "+j.direction,id:F+":"+R}),B=h("p",O.loading,{"class":F+"-loading"});J===!0&&(J=3);var G=d(D.search);a(G[R])&&(delete G[R].url,j=p(j,G[R])),e["_"+(R-1)]=function(e){M($(H)+b(p(j.query,{callback:"_"+R,"max-results":1,"start-index":e.feed.openSearch$totalResults.$t})),function(){var e=j.active;e=E[e]||e,k[e]&&k[e].click()})},e["_"+R]=function(r){function n(e){w=this;var t=w.id.split(":")[1],r=w.getAttribute("j"),n=Y.parentNode,i=k[r],l=L[r];for(a in k)a!==r&&y(k[a],"active");for(a in L)a!==r&&(y(L[a],"active"),L[a].style.display="none",L[a].previousSibling.style.display="none");l.$||(m(i,"active loading"),g(Y.children[2],B),m(n,F+"-loading"),M($(H)+b(p(j.query,{callback:"_"+(R+1),"published-min":r+"-01T00:00:00","published-max":r+"-30T59:59:59"})),function(){y(n,F+"-loading"),y(i,"loading"),v(B)},{"class":F+"-js",id:F+"-js:"+t})),m(i,"active"),m(l,"active"),l.style.display="",l.previousSibling.style.display="",e.preventDefault()}r=r.feed||{};var a,s,o=j.sort,c=r.entry||[],u=[],d=0,x=r.updated.$t,N=c[0]&&c[0].published.$t||"1999",S=+x.split("-")[0],T=+N.split("-")[0],C=13;for(a=S;a>=T;--a){for(;C>1;)--C,s=a+"-"+(10>C?"0"+C:C),u.push({id:s,term:_(s+"-01T00:00:00",j.tab)}),++d;C=13}l(o)?(o=+o,u=u.sort(),-1===o&&(u=u.reverse())):i(o)&&(o=e[o],u=u.sort(o));var D,I=h("nav","",{"class":F+"-tabs p"});for(g(Y,I),g(Y,h("section","",{"class":F+"-panels p"})),a=0;d>a;++a){var A=u[a].id,q=u[a].term;j.hide.indexOf(q)>-1||(D=h("a",q,{"class":F+"-tab "+F+"-tab:"+a,href:"#"+F+"-panel:"+R+"."+a,id:F+"-tab:"+R+"."+a,j:u[a].id,title:q}),E.push(q),k[A]=D,f(D,"click",n),g(I,D),d-1>a&&g(I,t.createTextNode(" ")),g(Y.children[2],h("h4",q,{"class":F+"-title"})),g(Y.children[2],L[A]=h("ol","",{"class":F+"-panel "+F+"-panel:"+a,id:F+"-panel:"+R+"."+a})))}},e["_"+(R+1)]=function(t){function n(e){if(e){var t,r=e.published.$t,n="";for(s=0,o=e.link.length;o>s;++s)if("alternate"===e.link[s].rel){t=e.link[s].href;break}if(S){var a,i,c,u="media$thumbnail"in e;S===!0&&(S=80),l(S)?(a=i=S+"px",S="s"+S+"-c"):(c=/^s(\d+)(\-[cp])?$/.exec(S))?(a=c[1]+"px",i=c[2]?c[1]+"px":"auto"):(c=/^w(\d+)\-h(\d+)(\-[cp])?$/.exec(S))&&(a=c[1]+"px",i=c[2]+"px"),n+='<p class="'+F+"-image"+(u?"":" no-image")+'">',n+=u?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(\-c)?\//g,"/"+S+"/")+'" style="display:block;width:'+a+";height:"+i+';">':'<span class="img" style="display:block;width:'+a+";height:"+i+';">',n+="</p>"}if(n+='<h5 class="'+F+'-title"><a href="'+t+'"'+(x?' target="'+x+'"':"")+">"+e.title.$t+"</a></h5>",j.date&&(n+='<p class="'+F+'-time"><time datetime="'+r+'">'+_(r,j.date)+"</time></p>"),T){var d=e.summary.$t.trim().replace(/<.*?>/g,"").replace(/[<>]/g,""),p=d.length;T===!0&&(T=200),n+='<p class="'+F+"-excerpt"+(p?"":" no-excerpt")+'">'+d.slice(0,T)+(p>T?"&hellip;":"")+"</p>"}return h("li",n,{"class":e.$?"recent":!1})}}t=t.feed||{};var a,s,o,c=j.sort,u=w?w.getAttribute("j"):"",d=t.entry||[],f=d.length,y=L[u];for(a=0;f>a;++a){var v=a>j.recent?"":O.recent;d[a].$=!!v,d[a].title.$t+=v}l(c)?(c=+c,d=d.sort(function(e,t){return e.published.$t.localeCompare(t.published.$t)}),-1===c&&(d=d.reverse())):i(c)&&(c=e[c],d=d.sort(c));var x=j.target,S=j.image,T=j.excerpt,k="has-title has-url";for(j.date&&(k+=" has-time"),S&&(k+=" has-image"),T&&(k+=" has-excerpt"),m(Y,k),a=0;f>a;++a)g(y,n(d[a]));N()?(e["_"+R+"_"]=function(e){e=e.feed||{};var t=e.entry||[];t=t[Math.floor(Math.random()*t.length)],(t=n(t))&&(m(t,"ad"),g(y,t,y.firstChild))},M($("298900102869691923")+b(p(j.query,{callback:"_"+R+"_","max-results":21,orderby:"updated"}))+"&q="+r(u.toLowerCase()))):delete e["_"+R+"_"],L[u].$=!0},l(j.load)?e.setTimeout(S,+j.load):j.load===!0?f(e,"load",S):S()}(window,document);