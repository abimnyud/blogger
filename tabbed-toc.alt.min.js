/*! Tabbed TOC for Blogger V2 <https://dte-project.github.io/blogger/tabbed-toc.html> */
!function(e,t){function n(e){return encodeURIComponent(e)}function a(e){return decodeURIComponent(e)}function r(e){return void 0!==e}function l(e){return"string"==typeof e}function s(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function i(e){return"object"==typeof e}function o(e){return l(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function c(e){if(l(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e)&&e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER)return+e;if(o(e))try{return JSON.parse(e)}catch(t){}}return e}function u(e,t,n){for(var a,r=t.split("["),l=0,s=r.length;s-1>l;++l)a=r[l].replace(/\]$/,""),e=e[a]||(e[a]={});e[r[l].replace(/\]$/,"")]=n}function d(e,t){var n={},l=e.replace(/^.*?\?/,"");return""===l?n:(l.split(/&(?:amp;)?/).forEach(function(e){var l=e.split("="),s=a(l[0]),i=r(l[1])?a(l[1]):!0;i=!r(t)||t?c(i):i,"]"===s.slice(-1)?u(n,s,i):n[s]=i}),n)}function p(e,t){t=t||{};for(var n in e)r(t[n])?i(e[n])&&i(t[n])&&(t[n]=p(e[n],t[n])):t[n]=e[n];return t}function h(e,t,n){e.addEventListener(t,n,!1)}function f(e,n,a){if(e=t.createElement(e),r(n)&&""!==n&&(e.innerHTML=n),i(a))for(var l in a)a[l]!==!1&&e.setAttribute(l,a[l]);return e}function m(e,t){t=t.split(/\s+/);for(var n;n=t.shift();)e.classList.add(n)}function v(e,t){t=t.split(/\s+/);for(var n;n=t.shift();)e.classList.remove(n)}function y(e,t,n){e.insertBefore(t,n)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function b(e,t){var a,r=[];for(a in e)r.push(n(a)+"="+n(e[a]));return"?"+r.join(t||"&")}function $(e,t){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),r(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function E(e){return s(e)?("file:"===B.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":$(e)+"/feeds/posts/summary"}function I(e,t,n){var a=/\.css$/i.test($(e)),r=f(a?"link":"script","",p(a?{href:e,rel:"stylesheet"}:{src:e},n));return r.readyState?r.onreadystatechange=function(){("loaded"===r.readyState||"complete"===r.readyState)&&(r.onreadystatechange=null,t(r))}:h(r,"load",t),y(_,r,_.firstChild),r}function j(){if(A!==!1){var e=+(L.getItem(J)||-1);if(e>A)return L.setItem(J,0),!0;L.setItem(J,++e)}return!1}function x(e,t){var n,a=e.split("T"),r=a[0].split("-"),l=a[1].split("+")[0].split(":"),s=+l[0],i=s%12||12,o={"M\\+":H.months[+r[1]-1],"D\\+":H.days[new Date(e).getDay()],"h\\+":s+"",Y:r[0],M:r[1],D:r[2],h:i+"",m:l[1],s:Math.floor(+l[2])+"","\\?":H.midday[12>i||24===i?0:1]};for(n in o)t=t.replace(RegExp("%"+n,"g"),o[n]);return t}function C(){var e=R.container,n=R.css;n&&I(l(n)?n:$(N.src,"css")),I(E(U)+b(p(R.query,{callback:"_"+(O-1),"max-results":0})),function(){e?(e=t.querySelector(e),e&&(e.innerHTML=""),y(e,q)):y(N.parentNode,q,N),v(q.parentNode,J+"-loading")})}var k,N=t.currentScript||t.getElementsByTagName("script").pop(),w={},S=[],T={},M=9999,B=e.location,L=e.localStorage,D={direction:"ltr",hash:Date.now(),url:B.protocol+"//"+B.host,name:"tabbed-toc",css:$(N.src,"css").replace(".alt.","."),sort:-1,ad:!0,active:0,container:0,tab:"%Y %M+",date:"%M+ %D, %Y %h:%m %?",excerpt:0,image:0,target:0,load:0,recent:0,hide:[],text:{title:"Table of Content",loading:"Loading&hellip;",midday:["AM","PM"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],recent:" <sup>New!</sup>"},query:{alt:"json-in-script",orderby:"published","max-results":M,"start-index":1}},_=t.head,R=p(D,d(N.src)),O=R.hash,U=R.id||$(R.url),J=R.name,A=R.ad,H=R.text,q=f("div",'<h3 class="'+J+'-title">'+H.title+"</h3>",{"class":J+" "+R.direction,id:J+":"+O}),F=f("p",H.loading,{"class":J+"-loading"});A===!0&&(A=3);var Y=d(B.search);r(Y[O])&&(delete Y[O].url,R=p(R,Y[O])),e["_"+(O-1)]=function(e){I(E(U)+b(p(R.query,{callback:"_"+O,"max-results":1,"start-index":e.feed.openSearch$totalResults.$t})),function(){var e=R.active;e=S[e]||e,w[e]&&w[e].click()})},e["_"+O]=function(n){function a(e){k=this;var t=k.id.split(":")[1],n=k.getAttribute("j"),a=q.parentNode,l=w[n],s=T[n];for(r in w)r!==n&&v(w[r],"active");for(r in T)r!==n&&(v(T[r],"active"),T[r].style.display="none",T[r].previousSibling.style.display="none");s.$||(m(l,"active loading"),y(q.children[2],F),m(a,J+"-loading"),I(E(U)+b(p(R.query,{callback:"_"+(O+1),"published-min":n+"-01T00:00:00","published-max":n+"-30T59:59:59"})),function(){v(a,J+"-loading"),v(l,"loading"),g(F)},{"class":J+"-js",id:J+"-js:"+t})),m(l,"active"),m(s,"active"),s.style.display="",s.previousSibling.style.display="",e.preventDefault()}n=n.feed||{};var r,i,o=R.sort,c=n.entry||[],u=[],d=0,$=n.updated.$t,j=c[0]&&c[0].published.$t||"1999",C=+$.split("-")[0],N=+j.split("-")[0],M=13;for(r=C;r>=N;--r){for(;M>1;)--M,i=r+"-"+(10>M?"0"+M:M),u.push({id:i,term:x(i+"-01T00:00:00",R.tab)}),++d;M=13}s(o)?(o=+o,u=u.sort(),-1===o&&(u=u.reverse())):l(o)&&(o=e[o],u=u.sort(o));var B,L=f("nav","",{"class":J+"-tabs p"});y(q,L),y(q,f("section","",{"class":J+"-panels p"}));var D=Object.values(R.hide);for(r=0;d>r;++r){var _=u[r].id,A=u[r].term;D.indexOf(A)>-1||(B=f("a",A,{"class":J+"-tab "+J+"-tab:"+r,href:"#"+J+"-panel:"+O+"."+r,id:J+"-tab:"+O+"."+r,j:u[r].id,title:A}),S.push(A),w[_]=B,h(B,"click",a),y(L,B),d-1>r&&y(L,t.createTextNode(" ")),y(q.children[2],f("h4",A,{"class":J+"-title"})),y(q.children[2],T[_]=f("ol","",{"class":J+"-panel "+J+"-panel:"+r,id:J+"-panel:"+O+"."+r})))}},e["_"+(O+1)]=function(t){function a(e){if(e){var t,n=e.published.$t,a="";for(i=0,o=e.link.length;o>i;++i)if("alternate"===e.link[i].rel){t=e.link[i].href;break}if(C){var r,l,c,u="media$thumbnail"in e;C===!0&&(C=80),s(C)?(r=l=C+"px",C="s"+C+"-c"):(c=/^s(\d+)(\-[cp])?$/.exec(C))?(r=c[1]+"px",l=c[2]?c[1]+"px":"auto"):(c=/^w(\d+)\-h(\d+)(\-[cp])?$/.exec(C))&&(r=c[1]+"px",l=c[2]+"px"),a+='<p class="'+J+"-image"+(u?"":" no-image")+' loading">';var d="this.removeAttribute('",d=","+d+"onload'),"+d+"onerror')";a+=u?'<img class="loading" onload="this.parentNode.classList.remove(\'loading\')'+d+";\" onerror=\"this.parentNode.classList.add('error')"+d+';" alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(\-c)?\//g,"/"+C+"/")+'" style="display:block;width:'+r+";height:"+l+';">':'<span class="img" style="display:block;width:'+r+";height:"+l+';">',a+="</p>"}if(a+='<h5 class="'+J+'-title"><a href="'+t+'"'+($?' target="'+$+'"':"")+">"+e.title.$t+"</a></h5>",R.date&&(a+='<p class="'+J+'-time"><time datetime="'+n+'">'+x(n,R.date)+"</time></p>"),N){var p=e.summary.$t.trim().replace(/<.*?>/g,"").replace(/[<>]/g,""),h=p.length;N===!0&&(N=200),a+='<p class="'+J+"-excerpt"+(h?"":" no-excerpt")+'">'+p.slice(0,N)+(h>N?"&hellip;":"")+"</p>"}return f("li",a,{"class":e.$?"recent":!1})}}t=t.feed||{};var r,i,o,c=R.sort,u=k?k.getAttribute("j"):"",d=t.entry||[],h=d.length,v=T[u];for(r=0;h>r;++r){var g=r>R.recent?"":H.recent;d[r].$=!!g,d[r].title.$t+=g}s(c)?(c=+c,d=d.sort(function(e,t){return e.published.$t.localeCompare(t.published.$t)}),-1===c&&(d=d.reverse())):l(c)&&(c=e[c],d=d.sort(c));var $=R.target,C=R.image,N=R.excerpt,w="has-title has-url";for(R.date&&(w+=" has-time"),C&&(w+=" has-image"),N&&(w+=" has-excerpt"),m(q,w),r=0;h>r;++r)y(v,a(d[r]));j()?(e["_"+O+"_"]=function(e){e=e.feed||{};var t=e.entry||[];t=t[Math.floor(Math.random()*t.length)],(t=a(t))&&(m(t,"ad"),y(v,t,v.firstChild))},I(E("298900102869691923")+b(p(R.query,{callback:"_"+O+"_","max-results":21,orderby:"updated"}))+"&q="+n(u.toLowerCase()))):delete e["_"+O+"_"],T[u].$=!0},s(R.load)?e.setTimeout(C,+R.load):R.load===!0?h(e,"load",C):C()}(window,document);