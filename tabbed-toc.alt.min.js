/*! Tabbed TOC for Blogger V2 <https://dte-project.github.io/blogger/tabbed-toc.html> */
!function(e,r){function t(e){return encodeURIComponent(e)}function a(e){return decodeURIComponent(e)}function n(e){return void 0!==e}function l(e){return"string"==typeof e}function s(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function i(e){return"object"==typeof e}function c(e){return l(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function o(e){if(l(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e)&&e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER)return+e;if(c(e))try{return JSON.parse(e)}catch(r){}}return e}function p(e,r,t){for(var a,n=r.split("["),l=0,s=n.length;s-1>l;++l)a=n[l].replace(/\]$/,""),e=e[a]||(e[a]={});e[n[l].replace(/\]$/,"")]=t}function u(e,r){var t={},l=e.replace(/^.*?\?/,"");return""===l?t:(l.split(/&(?:amp;)?/).forEach(function(e){var l=e.split("="),s=a(l[0]),i=n(l[1])?a(l[1]):!0;i=!n(r)||r?o(i):i,"]"===s.slice(-1)?p(t,s,i):t[s]=i}),t)}function g(e,r){r=r||{};for(var t in e)n(r[t])?i(e[t])&&i(r[t])&&(r[t]=g(e[t],r[t])):r[t]=e[t];return r}function d(e,r,t){e.addEventListener(r,t,!1)}function f(e,t,a){if(e=r.createElement(e),n(t)&&""!==t&&(e.innerHTML=t),i(a))for(var l in a)a[l]!==!1&&e.setAttribute(l,a[l]);return e}function m(e,r){r=r.split(/\s+/);for(var t;t=r.shift();)e.classList.add(t)}function h(e,r){r=r.split(/\s+/);for(var t;t=r.shift();)e.classList.remove(t)}function v(e,r,t){e.insertBefore(r,t)}function $(e){e.parentNode.removeChild(e)}function b(e,r){var a,n=[];for(a in e)n.push(t(a)+"="+t(e[a]));return"?"+n.join(r||"&")}function y(e,r){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),n(r)&&(e=e.replace(/\.[\w-]+$/,r?"."+r:"")),e}function x(e){return s(e)?("file:"===j.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":y(e)+"/feeds/posts/summary"}function E(e,r,t){var a=/\.css$/i.test(y(e)),n=f(a?"link":"script","",g(a?{href:e,rel:"stylesheet"}:{src:e},t));return n.readyState?n.onreadystatechange=function(){("loaded"===n.readyState||"complete"===n.readyState)&&(n.onreadystatechange=null,r(n))}:d(n,"load",r),v(I,n,I.firstChild),n}function R(){if(F!==!1){var e=+(D.getItem(H)||-1);if(e>F)return D.setItem(H,0),!0;D.setItem(H,++e)}return!1}function S(e,r){var t,a=e.split("T"),n=a[0].split("-"),l=a[1].split("+")[0].split(":"),s={"M+":J.months[+n[1]-1],"D+":J.days[new Date(e).getDay()],Y:n[0],M:n[1],D:n[2],h:l[0],m:l[1],s:Math.floor(+l[2])+""};for(t in s)r=r.replace(RegExp("%"+t.replace("+","\\+"),"g"),s[t]);return r}function k(){var e=C.container,t=C.css;t&&E(l(t)?t:y(_.src,"css")),E(x(O)+b(g(C.query,{callback:"_"+(A-1),"max-results":0})),function(){e?(e=r.querySelector(e),e&&(e.innerHTML=""),v(e,z)):v(_.parentNode,z,_),h(z.parentNode,H+"-loading")})}var w,_=r.currentScript||r.getElementsByTagName("script").pop(),T={},M=[],N={},q=9999,j=e.location,D=e.localStorage,L={direction:"ltr",hash:Date.now(),url:j.protocol+"//"+j.host,name:"tabbed-toc",css:y(_.src,"css").replace(".alt.","."),sort:-1,ad:!0,active:0,container:0,tab:"%Y %M+",date:"%D+, %D %M+ %Y %h:%m",excerpt:0,image:0,target:0,load:0,recent:0,hide:[],text:{title:"Table of Content",loading:"Loading&hellip;",months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],recent:" <sup>New!</sup>"},query:{alt:"json-in-script",orderby:"published","max-results":q,"start-index":1}},I=r.head,C=g(L,u(_.src)),A=C.hash,O=C.id||y(C.url),H=C.name,F=C.ad,J=C.text,z=f("div",'<h3 class="'+H+'-title">'+J.title+"</h3>",{"class":H+" "+C.direction,id:H+":"+A}),B=f("p",J.loading,{"class":H+"-loading"});F===!0&&(F=3);var G=u(j.search);n(G[A])&&(delete G[A].url,C=g(C,G[A])),e["_"+(A-1)]=function(e){E(x(O)+b(g(C.query,{callback:"_"+A,"max-results":1,"start-index":e.feed.openSearch$totalResults.$t})),function(){var e=C.active;e=M[e]||e,T[e]&&T[e].click()})},e["_"+A]=function(t){function a(e){w=this;var r=w.id.split(":")[1],t=w.getAttribute("j"),a=z.parentNode,l=T[t];for(n in T)h(T[n],"active");for(n in N)N[n].style.display="none",N[n].previousSibling.style.display="none",h(N[n],"active");N[t].$||(m(l,"active loading"),v(z.children[2],B),m(a,H+"-loading"),E(x(O)+b(g(C.query,{callback:"_"+(A+1),"published-min":t+"-01T00:00:00","published-max":t+"-30T59:59:59"})),function(){h(a,H+"-loading"),h(l,"loading"),$(B)},{"class":H+"-js",id:H+"-js:"+r})),m(l,"active"),N[t].style.display="",N[t].previousSibling.style.display="",m(N[t],"active"),e.preventDefault()}t=t.feed||{};var n,i,c=C.sort,o=t.entry||[],p=[],u=0,y=t.updated.$t,R=o[0]&&o[0].published.$t||"1999",k=+y.split("-")[0],_=+R.split("-")[0],q=13;for(n=k;n>=_;--n){for(;q>1;)--q,i=n+"-"+(10>q?"0"+q:q),p.push({id:i,term:S(i+"-01T00:00:00",C.tab)}),++u;q=13}s(c)?(c=+c,p=p.sort(),-1===c&&(p=p.reverse())):l(c)&&(c=e[c],p=p.sort(c));var j,D=f("nav","",{"class":H+"-tabs p"});for(v(z,D),v(z,f("section","",{"class":H+"-panels p"})),n=0;u>n;++n){var L=p[n].id,I=p[n].term;C.hide.indexOf(I)>-1||(j=f("a",I,{"class":H+"-tab "+H+"-tab:"+n,href:"#"+H+"-panel:"+A+"."+n,id:H+"-tab:"+A+"."+n,j:p[n].id,title:I}),M.push(I),T[L]=j,d(j,"click",a),v(D,j),u-1>n&&v(D,r.createTextNode(" ")),v(z.children[2],f("h4",I,{"class":H+"-title"})),v(z.children[2],N[L]=f("ol","",{"class":H+"-panel "+H+"-panel:"+n+" active",id:H+"-panel:"+A+"."+n})))}},e["_"+(A+1)]=function(r){function a(e){if(e){var r,t=e.published.$t,a="";for(i=0,c=e.link.length;c>i;++i)if("alternate"===e.link[i].rel){r=e.link[i].href;break}if(k){var n="media$thumbnail"in e;k===!0&&(k=80),s(k)&&(k="s"+k+"-c"),a+='<p class="'+H+"-image"+(n?"":" no-image")+'">',a+=n?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(-c)?\//g,"/"+k+"/")+'" style="display:block;width:'+k+"px;height:"+k+'px;">':'<span class="img" style="display:block;width:'+k+"px;height:"+k+'px;">',a+="</p>"}if(a+='<h5 class="'+H+'-title"><a href="'+r+'"'+(y?' target="'+y+'"':"")+">"+e.title.$t+"</a></h5>",C.date&&(a+='<p class="'+H+'-time"><time datetime="'+t+'">'+S(t,C.date)+"</time></p>"),_){var l=e.summary.$t.trim().replace(/<.*?>/g,"").replace(/[<>]/g,""),o=l.length;_===!0&&(_=200),a+='<p class="'+H+"-excerpt"+(o?"":" no-excerpt")+'">'+l.slice(0,_)+(o>_?"&hellip;":"")+"</p>"}return f("li",a,{"class":e.$?"recent":!1})}}r=r.feed||{};var n,i,c,o=C.sort,p=w?w.getAttribute("j"):"",u=r.entry||[],d=u.length,h=N[p];for(n=0;d>n;++n){var $=n>C.recent?"":J.recent;u[n].$=!!$,u[n].title.$t+=$}s(o)?(o=+o,u=u.sort(function(e,r){return e.published.$t.localeCompare(r.published.$t)}),-1===o&&(u=u.reverse())):l(o)&&(o=e[o],u=u.sort(o));var y=C.target,k=C.image,_=C.excerpt,T="has-title has-url";for(C.date&&(T+=" has-time"),k&&(T+=" has-image"),_&&(T+=" has-excerpt"),m(z,T),n=0;d>n;++n)v(h,a(u[n]));R()?(e["_"+A+"_"]=function(e){e=e.feed||{};var r=e.entry||[];r=r[Math.floor(Math.random()*r.length)],(r=a(r))&&(m(r,"ad"),v(h,r,h.firstChild))},E(x("298900102869691923")+b(g(C.query,{callback:"_"+A+"_","max-results":21,orderby:"updated"}))+"&q="+t(p.toLowerCase()))):delete e["_"+A+"_"],N[p].$=!0},s(C.load)?e.setTimeout(k,+C.load):C.load===!0?d(e,"load",k):k()}(window,document);