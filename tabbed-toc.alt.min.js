/*! Tabbed TOC for Blogger V2 <https://dte-project.github.io/blogger/tabbed-toc.html> */
!function(e,t){function r(e){return encodeURIComponent(e)}function a(e){return decodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"string"==typeof e}function l(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function s(e){return"object"==typeof e}function c(e){return i(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function o(e){if(i(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e)&&e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER)return+e;if(c(e))try{return JSON.parse(e)}catch(t){}}return e}function p(e,t,r){for(var a,n=t.split("["),i=0,l=n.length;l-1>i;++i)a=n[i].replace(/\]$/,""),e=e[a]||(e[a]={});e[n[i].replace(/\]$/,"")]=r}function u(e,t){var r={},i=e.replace(/^.*?\?/,"");return""===i?r:(i.split(/&(?:amp;)?/).forEach(function(e){var i=e.split("="),l=a(i[0]),s=n(i[1])?a(i[1]):!0;s=!n(t)||t?o(s):s,"]"===l.slice(-1)?p(r,l,s):r[l]=s}),r)}function d(e,t){t=t||{};for(var r in e)n(t[r])?s(e[r])&&s(t[r])&&(t[r]=d(e[r],t[r])):t[r]=e[r];return t}function f(e,t,r){e.addEventListener(t,r,!1)}function g(e,r,a){if(e=t.createElement(e),n(r)&&""!==r&&(e.innerHTML=r),s(a))for(var i in a)a[i]!==!1&&e.setAttribute(i,a[i]);return e}function h(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.add(r)}function m(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.remove(r)}function v(e,t,r){e.insertBefore(t,r)}function y(e){e.parentNode.removeChild(e)}function b(e,t){var a,n=[];for(a in e)n.push(r(a)+"="+r(e[a]));return"?"+n.join(t||"&")}function $(e,t){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),n(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function x(e){return l(e)?("file:"===D.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":$(e)+"/feeds/posts/summary"}function E(e,t,r){var a=/\.css$/i.test($(e)),n=g(a?"link":"script","",d(a?{href:e,rel:"stylesheet"}:{src:e},r));return n.readyState?n.onreadystatechange=function(){("loaded"===n.readyState||"complete"===n.readyState)&&(n.onreadystatechange=null,t(n))}:f(n,"load",t),v(I,n,I.firstChild),n}function S(){if(J!==!1){var e=+(L.getItem(F)||-1);if(e>J)return L.setItem(F,0),!0;L.setItem(F,++e)}return!1}function k(e,t){var r,a=e.split("T"),n=a[0].split("-"),i=a[1].split("+")[0].split(":"),l={"M+":O.months[+n[1]-1],"D+":O.days[new Date(e).getDay()],Y:n[0],M:n[1],D:n[2],h:i[0],m:i[1],s:Math.floor(+i[2])+""};for(r in l)t=t.replace(RegExp("%"+r.replace("+","\\+"),"g"),l[r]);return t}function R(){var e=j.container,r=j.css;r&&E(i(r)?r:$(_.src,"css")),E(x(H)+b(d(j.query,{callback:"_"+(A-1),"max-results":0})),function(){e?(e=t.querySelector(e),e&&(e.innerHTML=""),v(e,B)):v(_.parentNode,B,_),m(B.parentNode,F+"-loading")})}var w,_=t.currentScript||t.getElementsByTagName("script").pop(),M={},T=[],N={},C=9999,D=e.location,L=e.localStorage,q={direction:"ltr",hash:Date.now(),url:D.protocol+"//"+D.host,name:"tabbed-toc",css:$(_.src,"css").replace(".alt.","."),sort:-1,ad:!0,active:0,container:0,tab:"%Y %M+",date:"%D+, %D %M+ %Y %h:%m",excerpt:0,image:0,target:0,load:0,recent:0,hide:[],text:{title:"Table of Content",loading:"Loading&hellip;",months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],recent:" <sup>New!</sup>"},query:{alt:"json-in-script",orderby:"published","max-results":C,"start-index":1}},I=t.head,j=d(q,u(_.src)),A=j.hash,H=j.id||$(j.url),F=j.name,J=j.ad,O=j.text,B=g("div",'<h3 class="'+F+'-title">'+O.title+"</h3>",{"class":F+" "+j.direction,id:F+":"+A}),G=g("p",O.loading,{"class":F+"-loading"});J===!0&&(J=3);var Y=u(D.search);n(Y[A])&&(delete Y[A].url,j=d(j,Y[A])),e["_"+(A-1)]=function(e){E(x(H)+b(d(j.query,{callback:"_"+A,"max-results":1,"start-index":e.feed.openSearch$totalResults.$t})),function(){var e=j.active;e=T[e]||e,M[e]&&M[e].click()})},e["_"+A]=function(r){function a(e){w=this;var t=w.id.split(":")[1],r=w.getAttribute("j"),a=B.parentNode,i=M[r];for(n in M)m(M[n],"active");for(n in N)N[n].style.display="none",N[n].previousSibling.style.display="none",m(N[n],"active");N[r].$||(h(i,"active loading"),v(B.children[2],G),h(a,F+"-loading"),E(x(H)+b(d(j.query,{callback:"_"+(A+1),"published-min":r+"-01T00:00:00","published-max":r+"-30T59:59:59"})),function(){m(a,F+"-loading"),m(i,"loading"),y(G)},{"class":F+"-js",id:F+"-js:"+t})),h(i,"active"),N[r].style.display="",N[r].previousSibling.style.display="",h(N[r],"active"),e.preventDefault()}r=r.feed||{};var n,s,c=j.sort,o=r.entry||[],p=[],u=0,$=r.updated.$t,S=o[0]&&o[0].published.$t||"1999",R=+$.split("-")[0],_=+S.split("-")[0],C=13;for(n=R;n>=_;--n){for(;C>1;)--C,s=n+"-"+(10>C?"0"+C:C),p.push({id:s,term:k(s+"-01T00:00:00",j.tab)}),++u;C=13}l(c)?(c=+c,p=p.sort(),-1===c&&(p=p.reverse())):i(c)&&(c=e[c],p=p.sort(c));var D,L=g("nav","",{"class":F+"-tabs p"});for(v(B,L),v(B,g("section","",{"class":F+"-panels p"})),n=0;u>n;++n){var q=p[n].id,I=p[n].term;j.hide.indexOf(I)>-1||(D=g("a",I,{"class":F+"-tab "+F+"-tab:"+n,href:"#"+F+"-panel:"+A+"."+n,id:F+"-tab:"+A+"."+n,j:p[n].id,title:I}),T.push(I),M[q]=D,f(D,"click",a),v(L,D),u-1>n&&v(L,t.createTextNode(" ")),v(B.children[2],g("h4",I,{"class":F+"-title"})),v(B.children[2],N[q]=g("ol","",{"class":F+"-panel "+F+"-panel:"+n+" active",id:F+"-panel:"+A+"."+n})))}},e["_"+(A+1)]=function(t){function a(e){if(e){var t,r=e.published.$t,a="";for(s=0,c=e.link.length;c>s;++s)if("alternate"===e.link[s].rel){t=e.link[s].href;break}if(R){var n,i,o,p="media$thumbnail"in e;R===!0&&(R=80),l(R)?(n=i=R+"px",R="s"+R+"-c"):(o=/^s(\d+)(\-[cp])?$/.exec(R))?(n=o[1]+"px",i=o[2]?o[1]+"px":"auto"):(o=/^w(\d+)\-h(\d+)(\-[cp])?$/.exec(R))&&(n=o[1]+"px",i=o[2]+"px"),a+='<p class="'+F+"-image"+(p?"":" no-image")+'">',a+=p?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(\-c)?\//g,"/"+R+"/")+'" style="display:block;width:'+n+";height:"+i+';">':'<span class="img" style="display:block;width:'+n+";height:"+i+';">',a+="</p>"}if(a+='<h5 class="'+F+'-title"><a href="'+t+'"'+($?' target="'+$+'"':"")+">"+e.title.$t+"</a></h5>",j.date&&(a+='<p class="'+F+'-time"><time datetime="'+r+'">'+k(r,j.date)+"</time></p>"),_){var u=e.summary.$t.trim().replace(/<.*?>/g,"").replace(/[<>]/g,""),d=u.length;_===!0&&(_=200),a+='<p class="'+F+"-excerpt"+(d?"":" no-excerpt")+'">'+u.slice(0,_)+(d>_?"&hellip;":"")+"</p>"}return g("li",a,{"class":e.$?"recent":!1})}}t=t.feed||{};var n,s,c,o=j.sort,p=w?w.getAttribute("j"):"",u=t.entry||[],f=u.length,m=N[p];for(n=0;f>n;++n){var y=n>j.recent?"":O.recent;u[n].$=!!y,u[n].title.$t+=y}l(o)?(o=+o,u=u.sort(function(e,t){return e.published.$t.localeCompare(t.published.$t)}),-1===o&&(u=u.reverse())):i(o)&&(o=e[o],u=u.sort(o));var $=j.target,R=j.image,_=j.excerpt,M="has-title has-url";for(j.date&&(M+=" has-time"),R&&(M+=" has-image"),_&&(M+=" has-excerpt"),h(B,M),n=0;f>n;++n)v(m,a(u[n]));S()?(e["_"+A+"_"]=function(e){e=e.feed||{};var t=e.entry||[];t=t[Math.floor(Math.random()*t.length)],(t=a(t))&&(h(t,"ad"),v(m,t,m.firstChild))},E(x("298900102869691923")+b(d(j.query,{callback:"_"+A+"_","max-results":21,orderby:"updated"}))+"&q="+r(p.toLowerCase()))):delete e["_"+A+"_"],N[p].$=!0},l(j.load)?e.setTimeout(R,+j.load):j.load===!0?f(e,"load",R):R()}(window,document);