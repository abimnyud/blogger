/*! Accordion TOC for Blogger V2 <https://dte-project.github.io/blogger/stacked-toc.html> */
!function(e,t){function r(e,t){function r(e){return decodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return i(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function o(e){if(i(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e))return+e;if(a(e))try{return JSON.parse(e)}catch(t){}}return e}function s(e,t,r){for(var n,i=t.split("["),a=0,o=i.length;o-1>a;++a)n=i[a].replace(/\]$/,""),e=e[n]||(e[n]={});e[i[a].replace(/\]$/,"")]=r}var l={},c=e.replace(/^.*?\?/,"");return""===c?l:(c.split(/&(?:amp;)?/).forEach(function(e){var i=e.split("="),a=r(i[0]),c=n(i[1])?r(i[1]):!0;c=!n(t)||t?o(c):c,"]"===a.slice(-1)?s(l,a,c):l[a]=c}),l)}e[t]=r}(window,"q2o"),function(e,t){function r(e){return encodeURIComponent(e)}function n(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function o(e){return null!==e&&"object"==typeof e}function s(e,t){t=t||{};for(var r in e)n(t[r])?o(e[r])&&o(t[r])&&(t[r]=s(e[r],t[r])):t[r]=e[r];return t}function l(e,t,r){e.addEventListener(t,r,!1)}function c(e,t){var r,i,a={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(r in a)if(n(e.style[r])){i=a[r];break}i?l(e,i,function(){t(e)}):t(e)}function u(e,r,i){if(e=t.createElement(e),n(r)&&""!==r&&(e.innerHTML=r),o(i))for(var a in i)i[a]!==!1&&e.setAttribute(a,i[a]);return e}function f(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.add(r)}function d(e,t){t=t.split(/\s+/);for(var r;r=t.shift();)e.classList.remove(r)}function p(e,t){return e.classList.contains(t)}function h(e,t,r){t&&e.insertBefore(t,r)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function m(e,t){var n,i=[];for(n in e)i.push(r(n)+"="+r(e[n]));return"?"+i.join(t||"&")}function v(e,t){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),n(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function y(e){return a(e)?("file:"===N.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":v(e)+"/feeds/posts/summary"}function b(e,t,r){var n=/\.css$/i.test(v(e)),i=u(n?"link":"script","",s(n?{href:e,rel:"stylesheet"}:{src:e},r));return i.readyState?i.onreadystatechange=function(){("loaded"===i.readyState||"complete"===i.readyState)&&(i.onreadystatechange=null,t&&t(i))}:t&&l(i,"load",t),h(E,i,E.firstChild),i}function x(){if(B!==!1){var e=+(T.getItem(R)||-1);if(e>B)return T.setItem(R,0),!0;T.setItem(R,++e)}return!1}function $(e,t){var r,n=e.split("T"),i=n[0].split("-"),a=n[1].split("+")[0].split(":"),o=+a[0],s=o%12||12,l={"M~":I.months[+i[1]-1],"D~":I.days[new Date(e).getDay()],"h~":o+"",Y:i[0],M:i[1],D:i[2],h:s+"",m:a[1],s:Math.floor(+a[2])+"","\\?":I.midday[12>s||24===s?0:1]};for(r in l)t=t.replace(/\\%/g,"&#37;").replace(RegExp("%"+r+"%","g"),l[r]);return t}function w(){M.id||(M.id=R+"-js"),f(M,R+"-js");var e=q.container,r=q.css;r&&!t.getElementById(R+"-css")&&b(i(r)?r:v(M.src,"css"),0,{"class":R+"-css",id:R+"-css"}),b(y(D)+m(s(q.query,{callback:"_"+_,"max-results":0})),function(){e?(e=t.querySelector(e),e&&(e.innerHTML=""),h(e,O)):h(M.parentNode,O,M),d(O.parentNode,R+"-loading");var r=q.active;a(r)&&(r=H[r]),L[r]&&L[r].click()})}var k=e.q2o,M=t.currentScript||t.getElementsByTagName("script").pop(),N=e.location,T=e.localStorage,L={},H=[],S={},C=9999,j={i:Date.now(),direction:"ltr",url:N.protocol+"//"+N.host,name:"stacked-toc",css:1,sort:1,ad:!0,toggle:!0,active:0,container:0,date:"%M~% %D%, %Y% %h%:%m% %?%",excerpt:0,image:0,target:0,load:0,recent:7,hide:[],text:{title:"Table of Content",loading:"Loading&hellip;",midday:["AM","PM"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],recent:" <sup>New!</sup>"},query:{alt:"json-in-script",orderby:"published","max-results":C,"start-index":1}},E=t.head,q=s(j,k(M.src)),_=q.i,D=q.id||v(q.url),R=q.name,B=q.ad,I=q.text,O=u("div",'<h3 class="'+R+'-title">'+I.title+"</h3>",{"class":R+" "+q.direction,id:R+":"+_}),A=u("p",I.loading,{"class":R+"-loading"});B===!0&&(B=3);var J=k(N.search);n(J[_])&&(delete J[_].url,q=s(q,J[_])),e["_"+_]=function(t){function n(){for(x in S)S[x].offsetHeight&&(S[x].style.height=S[x].scrollHeight+"px")}function o(e){var t=this.parentNode.id.split(":")[1],n=this.title,i=O.parentNode,a=L[n].parentNode,o=S[n];if(-1===q.toggle)for(x in S)x!==n&&!S[x].offsetHeight&&(S[x].style.height=0);else{for(x in L)x!==n&&d(L[x].parentNode,"active");for(x in S)x!==n&&(d(S[x],"active"),S[x].style.height=0)}o.$||(f(a,"loading"),f(o,"loading"),f(i,R+"-loading"),h(O,A,o),b(y(D)+"/-/"+r(n)+m(s(q.query,{callback:"_"+(_+1)})),function(){d(a,"loading"),d(o,"loading"),d(i,R+"-loading"),g(A),o.style.height=o.scrollHeight+"px"},{"class":R+"-js",id:R+"-js:"+t})),p(a,"active")?q.toggle&&(d(a,"active"),d(o,"active"),o.style.height=0):(f(a,"active"),f(o,"active"),o.style.height=o.scrollHeight+"px"),e.preventDefault()}t=t.feed||{};var x,$=q.sort,w=t.entry||[],k=t.category||[],M=(w.length,k.length);a($)?($=+$,k=k.sort(function(e,t){return e.term.localeCompare(t.term)}),-1===$&&(k=k.reverse())):i($)&&($=e[$],k=k.sort($));var N,T,C,j=Object.values(q.hide);for(x=0;M>x;++x){var E=k[x].term;j.indexOf(E)>-1||(N=u("a",E,{href:v(q.url)+"/search/label/"+r(E),title:E}),T=u("h4","",{"class":R+"-header "+R+"-header:"+x+" "+R+"-title",id:R+"-header:"+_+"."+x}),C=u("ol","",{"class":R+"-panel "+R+"-panel:"+x,id:R+"-panel:"+_+"."+x,style:"overflow:hidden;"}),c(C,function(e){e.offsetHeight&&(e.style.height="")}),H.push(E),L[E]=N,l(N,"touchstart",n),l(N,"mousedown",n),l(N,"click",o),h(T,N),h(O,T),h(O,S[E]=C))}},e["_"+(_+1)]=function(t){function n(e){if(e){var t=e.published.$t,r=(e.link.find(function(e){return"alternate"===e.rel})||{}).href;if(str="",r){if(H){var n,i,o,s="media$thumbnail"in e;H===!0&&(H=80),a(H)?(n=i=H+"px",H="s"+H+"-c"):(o=/^s(\d+)(\-[cp])?$/.exec(H))?(n=o[1]+"px",i=o[2]?o[1]+"px":"auto"):(o=/^w(\d+)\-h(\d+)(\-[cp])?$/.exec(H))&&(n=o[1]+"px",i=o[2]+"px"),str+='<p class="'+R+"-image "+(s?"loading":"no-image")+'">',str+=s?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(\-c)?\//g,"/"+H+"/")+'" style="display:block;width:'+n+";height:"+i+';">':'<span class="img" style="display:block;width:'+n+";height:"+i+';">',str+="</p>"}if(str+='<h5 class="'+R+'-title"><a href="'+r+'"'+(T?' target="'+T+'"':"")+">"+e.title.$t+"</a></h5>",q.date&&(str+='<p class="'+R+'-time"><time datetime="'+t+'">'+$(t,q.date)+"</time></p>"),C){var l=e.summary.$t.replace(/<.*?>/g,"").replace(/[<>]/g,"").trim(),c=l.length;C===!0&&(C=200),str+='<p class="'+R+"-excerpt"+(c?"":" no-excerpt")+'">'+l.slice(0,C)+(c>C?"&hellip;":"")+"</p>"}return u("li",str,{"class":e.$?"recent":!1})}}}t=t.feed||{};var o,c,g=q.sort,v=((t.link.find(function(e){return"alternate"===e.rel})||{}).href||"").split("/").pop(),w=t.entry||[],k=w.length,M=S[v];for(k&&!p(M,"active")&&L[v].click(),o=0;k>o;++o){var N=o<q.recent?I.recent:"";w[o].$=!!N,w[o].title.$t+=N}a(g)?(g=+g,w=w.sort(function(e,t){return e.title.$t.localeCompare(t.title.$t)}),-1===g&&(w=w.reverse())):i(g)&&(g=e[g],w=w.sort(g));var T=q.target,H=q.image,C=q.excerpt,j="has-title has-url";for(q.date&&(j+=" has-time"),H&&(j+=" has-image"),C&&(j+=" has-excerpt"),f(O,j),o=0;k>o;++o)h(M,n(w[o]));if(H){var E=M.getElementsByTagName("img"),D=function(){f(this.parentNode,"error")},B=function(){d(this.parentNode,"loading")};for(o=0,c=E.length;c>o;++o)l(E[o],"error",D),l(E[o],"load",B)}x()&&b(y("298900102869691923")+m(s(q.query,{callback:"_"+_+"_","max-results":21,orderby:"updated"}))+"&q="+r(v.toLowerCase())),S[v].$=!0},e["_"+_+"_"]=function(e){e=e.feed||{};var t=e.entry||[];t=t[Math.floor(Math.random()*t.length)],(t=list(t))&&(f(t,"ad"),h(ol,t,ol.firstChild),p(ol,"active")&&(ol.style.height=ol.scrollHeight+"px"))},a(q.load)?e.setTimeout(w,+q.load):q.load===!0?l(e,"load",w):w()}(window,document);